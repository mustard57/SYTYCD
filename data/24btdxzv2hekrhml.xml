<message message-id="d2ati0$27vs$1@news.comcor-tv.ru" list="org.python.python-list" id="24btdxzv2hekrhml" type="general" date="2005-03-29T06:45:20Z" year="2005-01-01" year-month="2005-03-01" year-month-day="2005-03-28" thread-id="k2zqh2afh7hzjywo"><headers><envelope-from-line>From Serge.Orlov@gmail.com  Tue Mar 29 08:45:20 2005</envelope-from-line><from personal="Serge Orlov" address="Serge.Orlov@gmail.com">Serge Orlov &lt;Serge.Orlov@gmail.com&gt;</from><subject normal="Save passwords in scripts">Save passwords in scripts</subject><date>Tue, 29 Mar 2005 06:45:20 +0000 (UTC)</date><references>&lt;3a89v1F68kg9mU1@individual.net&gt;
	&lt;7xeke8yexy.fsf@ruckus.brouhaha.com&gt;
	&lt;3a98e6F66krvoU3@individual.net&gt; &lt;d1oh17$1hks$1@news.comcor-tv.ru&gt;
	&lt;3ar0bnF6a1bvjU1@individual.net&gt;</references><message-id>d2ati0$27vs$1@news.comcor-tv.ru</message-id><content-type>text/plain; charset=iso-8859-1</content-type><mime-version>1.0</mime-version></headers><normalized-references><normalized-message-id>d2ati0$27vs$1@news.comcor-tv.ru</normalized-message-id><normalized-reference>3a89v1F68kg9mU1@individual.net</normalized-reference><normalized-reference>7xeke8yexy.fsf@ruckus.brouhaha.com</normalized-reference><normalized-reference>3a98e6F66krvoU3@individual.net</normalized-reference><normalized-reference>d1oh17$1hks$1@news.comcor-tv.ru</normalized-reference><normalized-reference>3ar0bnF6a1bvjU1@individual.net</normalized-reference></normalized-references><body type="text/plain; charset=iso-8859-1"><para depth="0">Florian Lindner wrote:
</para><quote depth="1"><quotepara depth="1">Serge Orlov wrote:

</quotepara><quote depth="2"><quotepara depth="2">Florian Lindner wrote:
</quotepara><quote depth="3"><quotepara depth="3">Paul Rubin wrote:

</quotepara><quote depth="4"><quotepara depth="4">- sort of similar: have a separate process running that knows the
password (administrator enters it at startup time).  That process
listens on a unix socket and checks the ID of the client.  It
reveals the password to authorized clients, i.e. your readable
script running under sudo.  This keeps the password from ever
being stored on disk.

</quotepara><quotepara depth="4">- Modify the script itself to run as a long-running service instead
of as something that gets started and restarted all the time.  Have
an admin start it and type the password into it at startup time.
Users then connect to it (maybe with a web browser) and send it
commands.

</quotepara><quotepara depth="4">- Move the user operations from the script to server side database
procedures that do their own validity checking.  Then you don't
need a password.
</quotepara></quote><quotepara depth="3">
I'll evaluate the 3 ideas above further.
</quotepara></quote><quotepara depth="2">
I'm surprised there are no building blocks for a sudo replacement
in the UNIX world, at least I googled and couldn't find them.
Basically you need to split you script into two parts: priveledged
server and user client. They can talk xml-rpc over unix socket.
</quotepara></quote><quotepara depth="1">
Can I find out the identity of the client (PID/UID) when using unix
socket?
</quotepara></quote><para depth="0">
Paul Rubin has answered this question. And as far as I know, not all
unix OSes support that.  But you can do the following: create a security
group, add people to that group and create the socket that is owned
by the server process and accessible only by the people in that special
group.

</para><para depth="0">  Serge.
</para></body></message>