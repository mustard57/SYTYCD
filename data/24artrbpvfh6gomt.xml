<message message-id="m2adk1aw44.fsf@zip.local.thomases.com" list="org.ruby-lang.ruby-talk" id="24artrbpvfh6gomt" type="general" date="2002-11-23T10:54:46+09:00" year="2002-01-01" year-month="2002-11-01" year-month-day="2002-11-22" thread-id="f2yxbtjxgzgis6jx"><headers><envelope-from-line>From nntpsnarfer@fakefrom.com  Mon Jan  1 12:00:00 1990</envelope-from-line><from personal="Dave Thomas" address="Dave@PragmaticProgrammer.com">Dave Thomas &lt;Dave@PragmaticProgrammer.com&gt;</from><subject normal="[FAQ] Defining &lt;=&gt;">Re: [FAQ] Defining &lt;=&gt;</subject><path>main.gmane.org!not-for-mail</path><newsgroups>gmane.comp.lang.ruby.general</newsgroups><date>Sat, 23 Nov 2002 10:54:46 +0900</date><organization>The Pragmatic Programmers, LLC</organization><lines>43</lines><sender>dave@thomases.com</sender><approved>news@gmane.org</approved><message-id>m2adk1aw44.fsf@zip.local.thomases.com</message-id><references>&lt;pan.2002.11.22.23.59.21.831607@nc.rr.com&gt;</references><reply-to>ruby-talk@ruby-lang.org</reply-to><nntp-posting-host>main.gmane.org</nntp-posting-host><mime-version>1.0</mime-version><content-type>text/plain; charset=us-ascii</content-type><x-trace>main.gmane.org 1038016390 8883 80.91.224.249 (23 Nov 2002 01:53:10 GMT)</x-trace><x-complaints-to>usenet@main.gmane.org</x-complaints-to><nntp-posting-date>Sat, 23 Nov 2002 01:53:10 +0000 (UTC)</nntp-posting-date><return-path>ruby-talk-admin@ruby-lang.org</return-path><original-received>from helium.ruby-lang.org ([210.251.121.214])
	by main.gmane.org with esmtp (Exim 3.35 #1 (Debian))
	id 18FPTm-0002Ii-00
	for &lt;gclrg-ruby-talk@gmane.org&gt;; Sat, 23 Nov 2002 02:53:06 +0100</original-received><original-received>from helium.ruby-lang.org (localhost [127.0.0.1])
	by helium.ruby-lang.org (Postfix) with ESMTP
	id BE57529; Sat, 23 Nov 2002 10:54:47 +0900 (JST)</original-received><original-received>from zip.local.thomases.com (pragdave210.august.net [216.87.136.210])
	by helium.ruby-lang.org (Postfix) with ESMTP id 194D0D
	for &lt;ruby-talk@ruby-lang.org&gt;; Sat, 23 Nov 2002 10:54:45 +0900 (JST)</original-received><original-received>(from dave@localhost)
	by zip.local.thomases.com (8.11.2/8.11.2) id gAN1spj01730;
	Fri, 22 Nov 2002 19:54:51 -0600</original-received><original-posted>22 Nov 2002 19:54:51 -0600</original-posted><original-to>ruby-talk@ruby-lang.org (ruby-talk ML)</original-to><in-reply-to>&lt;pan.2002.11.22.23.59.21.831607@nc.rr.com&gt;</in-reply-to><x-ml-name>ruby-talk</x-ml-name><x-mail-count>56558</x-mail-count><x-mlserver>fml [fml 4.0.3 release (20011202/4.0.3)]; post only (anyone can post)</x-mlserver><x-ml-info>If you have a question,
	please contact ruby-talk-admin@ruby-lang.org;
	&lt;mailto:ruby-talk-admin@ruby-lang.org&gt;</x-ml-info><user-agent>Gnus/5.0808 (Gnus v5.8.8) XEmacs/21.4 (Solid Vapor)</user-agent><x-authentication-warning>zip.local.thomases.com: dave set sender to Dave@Thomases.com using -f</x-authentication-warning><precedence>bulk</precedence><original-lines>41</original-lines><list-id>ruby-talk.ruby-lang.org</list-id><list-software>fml [fml 4.0.3 release (20011202/4.0.3)]</list-software><list-post>&lt;mailto:ruby-talk@ruby-lang.org&gt;</list-post><list-owner>&lt;mailto:ruby-talk-admin@ruby-lang.org&gt;</list-owner><list-help>&lt;mailto:ruby-talk-ctl@ruby-lang.org?body=help&gt;</list-help><list-unsubscribe>&lt;mailto:ruby-talk-ctl@ruby-lang.org?body=unsubscribe&gt;</list-unsubscribe><xref>main.gmane.org gmane.comp.lang.ruby.general:14993</xref><x-report-spam>http://spam.gmane.org/gmane.comp.lang.ruby.general:14993</x-report-spam></headers><normalized-references><normalized-message-id>m2adk1aw44.fsf@zip.local.thomases.com</normalized-message-id><normalized-in-reply-to>pan.2002.11.22.23.59.21.831607@nc.rr.com</normalized-in-reply-to><normalized-reference>pan.2002.11.22.23.59.21.831607@nc.rr.com</normalized-reference></normalized-references><body type="text/plain; charset=us-ascii"><para depth="0">"Tim Hunter" &lt;<email>cyclists@nc.rr.com</email>&gt; writes:

</para><quote depth="1"><quotepara depth="1">Q: I've defined a class whose objects may be ordered. What should 
my &lt;=&gt; method do when the "other" argument is not in the same
class?

</quotepara><quotepara depth="1">A. Raise a TypeError exception. 
</quotepara></quote><para depth="0">
I have to say I disagree with this fairly strongly. 

</para><quote depth="1"><quotepara depth="1">The &lt;=&gt; method in most of Ruby's 
built-in classes will raise a TypeError exception if "other" 
can't be coerced into the same class.
</quotepara></quote><para depth="0">
There's a boat load of difference between coercion and "being the same
class". For example, following your code example would mean that

</para><para depth="0">   1 &lt;=&gt; 1.2

</para><para depth="0">would raise a type error.

</para><para depth="0">I honestly believe that the correct thing to do is not to check the
class (or the methods implemented) of your argument.  Instead, assume
the person using your class has half a brain. They may deliberately
pass a String in to a method designed to work with Files, knowing that
the &lt;&lt; operator works fine with both. They may well pass a Float into
class Fixnum's &lt;=&gt; method, knowing that the right thing will be done.

</para><para depth="0">You might choose to implement coercion in your own class if you feel
it worthwhile. You can do something as simple as calling a 'to_xxx'
method, or you can use something similar to the Numeric coerce
scheme. Depending on the circumstances, this might be a friendly move.

</para><para depth="0">Overzealously checking the class of parameters defeats much of the
point of Ruby.

</para><para depth="0">Regards

</para><para depth="0">Dave

</para></body></message>