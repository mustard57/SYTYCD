<message message-id="20100901012244.GA23427@cskk.homeip.net" list="org.python.python-list" id="24acyak7bvofvs7g" type="general" date="2010-09-01T11:22:45+10:00" year="2010-01-01" year-month="2010-08-01" year-month-day="2010-08-31" thread-id="hnbzt3wb4uqkye7m"><headers><envelope-from-line>Tue Aug 31 17:26:29 2010</envelope-from-line><from personal="Cameron Simpson" address="cs@zip.com.au">Cameron Simpson &lt;cs@zip.com.au&gt;</from><to personal="MRAB" address="python@mrabarnett.plus.com">MRAB &lt;python@mrabarnett.plus.com&gt;</to><cc personal="Python List" address="python-list@python.org">Python List &lt;python-list@python.org&gt;</cc><subject normal="Optimising literals away">Re: Optimising literals away</subject><received>from srv-117c-be06.markmail.marklogic.com ([172.19.8.46])
          by mail-1.a.markmail.int (JAMES SMTP Server 2.3.1) with SMTP ID 572
          for &lt;irma.mcbride.barker@a.markmail.org&gt;;
          Tue, 31 Aug 2010 17:26:29 -0800 (GMT-08:00)</received><received>from mail.python.org (slb-117n.markmail.marklogic.com [172.19.8.33])
	by mgw-1.public.markmail.int (Postfix) with ESMTP id 9A45729082F8
	for &lt;irma.mcbride.barker@a.markmail.org&gt;; Tue, 31 Aug 2010 18:26:05 -0700 (PDT)</received><received>from albatross.python.org (localhost [127.0.0.1])
	by mail.python.org (Postfix) with ESMTP id F3D02EEAF8
	for &lt;irma.mcbride.barker@a.markmail.org&gt;; Wed,  1 Sep 2010 03:26:27 +0200 (CEST)</received><dkim-signature>v=1; a=rsa-sha256; c=relaxed/simple; d=python.org; s=200901;
	t=1283304388; bh=0XJ/XP/GxEldXorWFY7POgT1zTtpiJXFiXGZSqh1v4c=;
	h=Date:From:To:Subject:Message-ID:MIME-Version:In-Reply-To:
	 References:Cc:List-Id:List-Unsubscribe:List-Archive:List-Post:
	 List-Help:List-Subscribe:Content-Type:Content-Transfer-Encoding:
	 Sender;
	b=uA/IYurhMYCJQlmUSwLg5ZUQFY6t6+biS+Uz8bUp+W304C2lS7UCq3klY8o+wKIH6
	 1hKum3eGU+oNBcVC+Oy9c71DFe2pCXtycnRjggd9MbKhnk61KxXdaGYmkcKpkHOwTM
	 sVFTIEvU1rZu/WtLNeMkKwJTh2bkGOfQU3/gFVS0=</dkim-signature><x-original-to>python-list@python.org</x-original-to><delivered-to>python-list@mail.python.org</delivered-to><received>from albatross.python.org (localhost [127.0.0.1])
	by mail.python.org (Postfix) with ESMTP id 26BCAEEA1F
	for &lt;python-list@python.org&gt;; Wed,  1 Sep 2010 03:22:49 +0200 (CEST)</received><x-spam-status>OK 0.002</x-spam-status><x-spam-evidence>'*H*': 1.00; '*S*': 0.00; 'cc:addr:python-list':
	0.05; 'cache': 0.07; 'example)': 0.07; 'wrote:': 0.14; 'cheers,':
	0.15; 'cc:name:python list': 0.16; 'constants': 0.16; 'discarded':
	0.16; 'from:addr:cs': 0.16; 'from:addr:zip.com.au': 0.16;
	'from:name:cameron simpson': 0.16; 'message-id:@cskk.homeip.net':
	0.16; 'mrab': 0.16; 'omitting': 0.16; 'received:202.125.174':
	0.16; 'received:202.125.174.133': 0.16;
	'received:boardofstudies.nsw.edu.au': 0.16;
	'received:cskk.homeip.net': 0.16;
	'received:harvey.boardofstudies.nsw.edu.au': 0.16;
	'received:homeip.net': 0.16; 'received:nsw.edu.au': 0.16;
	'thinking,': 0.16; 'class.': 0.19; 'previously': 0.19; 'header:In-
	Reply-To:1': 0.20; 'cc:2**0': 0.22; 'class,': 0.24; 'itself,':
	0.24; 'once.': 0.24; 'received:edu.au': 0.24; "didn't": 0.26;
	'thus': 0.26; 'cc:addr:python.org': 0.28; 'created': 0.30;
	'brain': 0.31; 'reason,': 0.31; 'subject:: ': 0.31; 'it.': 0.31;
	"isn't": 0.32; 'expression': 0.33; 'there': 0.34; 'whether': 0.34;
	'header:User-Agent:1': 0.35; 'anywhere': 0.35; 'but': 0.35;
	'bound': 0.36; 'set.': 0.36; 'still': 0.36; 'test': 0.36; 'next':
	0.36; 'possibility': 0.36; 'charset:us-ascii': 0.37; "it's": 0.37;
	'point': 0.38; 'depends': 0.38; 'stored': 0.38; 'me.': 0.38;
	'set': 0.38; 'some': 0.38; 'longer': 0.62; 'man': 0.66; "'set'":
	0.84; 'reuse': 0.84; 'set([1,2,3])': 0.84; 'then.': 0.91</x-spam-evidence><received>from localhost (HELO mail.python.org) (127.0.0.1)
	by albatross.python.org with SMTP; 01 Sep 2010 03:22:49 +0200</received><received>from harvey.boardofstudies.nsw.edu.au
	(mail2.rack1.boardofstudies.nsw.edu.au [202.125.174.133])
	by mail.python.org (Postfix) with ESMTP
	for &lt;python-list@python.org&gt;; Wed,  1 Sep 2010 03:22:48 +0200 (CEST)</received><received>from cskk.homeip.net (localhost.localdomain [127.0.0.1])
	by harvey.boardofstudies.nsw.edu.au (Postfix) with ESMTP id 39BB94D3984;
	Wed,  1 Sep 2010 11:22:45 +1000 (EST)</received><received>by janus.cskk.homeip.net (Postfix, from userid 1000)
	id 1FBF4100419B7; Wed,  1 Sep 2010 11:22:45 +1000 (EST)</received><date>Wed, 1 Sep 2010 11:22:45 +1000</date><message-id>20100901012244.GA23427@cskk.homeip.net</message-id><mime-version>1.0</mime-version><content-disposition>inline</content-disposition><in-reply-to>&lt;4C7D8462.8060505@mrabarnett.plus.com&gt;</in-reply-to><user-agent>Mutt/1.5.20 (2009-06-14)</user-agent><references>&lt;4C7D8462.8060505@mrabarnett.plus.com&gt;</references><x-beenthere>python-list@python.org</x-beenthere><x-mailman-version>2.1.12</x-mailman-version><precedence>list</precedence><list-id>General discussion list for the Python programming language
	&lt;python-list.python.org&gt;</list-id><list-unsubscribe>&lt;http://mail.python.org/mailman/options/python-list&gt;,
	&lt;mailto:python-list-request@python.org?subject=unsubscribe&gt;</list-unsubscribe><list-archive>&lt;http://mail.python.org/pipermail/python-list&gt;</list-archive><list-post>&lt;mailto:python-list@python.org&gt;</list-post><list-help>&lt;mailto:python-list-request@python.org?subject=help&gt;</list-help><list-subscribe>&lt;http://mail.python.org/mailman/listinfo/python-list&gt;,
	&lt;mailto:python-list-request@python.org?subject=subscribe&gt;</list-subscribe><content-type>text/plain; charset="us-ascii"</content-type><content-transfer-encoding>7bit</content-transfer-encoding><sender>python-list-bounces+irma.mcbride.barker=a.markmail.org@python.org</sender><errors-to>python-list-bounces+irma.mcbride.barker=a.markmail.org@python.org</errors-to></headers><normalized-references><normalized-message-id>20100901012244.GA23427@cskk.homeip.net</normalized-message-id><normalized-in-reply-to>4C7D8462.8060505@mrabarnett.plus.com</normalized-in-reply-to><normalized-reference>4C7D8462.8060505@mrabarnett.plus.com</normalized-reference></normalized-references><body type="text/plain; charset=&quot;us-ascii&quot;"><para depth="0">On 31Aug2010 23:38, MRAB &lt;<email>python@mrabarnett.plus.com</email>&gt; wrote:
| On 31/08/2010 23:11, Cameron Simpson wrote:
| &gt;On 31Aug2010 22:53, MRAB&lt;<email>python@mrabarnett.plus.com</email>&gt;  wrote:
| &gt;| There's still the possibility of some optimisation. If the resulting
| &gt;| set is never stored anywhere (bound to a name, for example) then it
| &gt;| could be created once. When the expression is evaluated there could be
| &gt;| a check so see whether 'set' is bound to the built-in class, and, if it
| &gt;| is, then just use the pre-created set.
| &gt;
| &gt;Wouldn't you need to repeat that check every time, otherwise "set" may
| &gt;no longer be the builtin?
| 
| Isn't that what I said?

</para><para depth="0">Yes. It's not what my brain decided to read to me.

</para><para depth="0">| My point is that if you have a set of constants which is created and
| then discarded you can cache it and reuse it next time. You check every
| time whether 'set' is bound to the set class.

</para><para depth="0">Ok then. I was thinking, for some reason, a JIT-like behaviour that
didn't just reuse the previously made set but replaced the set([1,2,3])
itself, thus omitting the test you mentioned:-(

</para><para depth="0">Cheers,
</para><footer type="signature" depth="0" hash="18172551519262987682">-- 
Cameron Simpson &lt;<email>cs@zip.com.au</email>&gt; DoD#743
<url>http://www.cskk.ezoshosting.com/cs/</url>

</footer><para depth="0">It's hard to make a man understand something when his livelihood depends
on him not understanding it. - Upton Sinclair
</para><footer type="list-management" depth="0">-- 
<url>http://mail.python.org/mailman/listinfo/python-list</url>
</footer></body></message>