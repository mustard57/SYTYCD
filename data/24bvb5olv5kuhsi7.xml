<message message-id="ac79ea400905280728t1c4f5d6gebb18b2e888b38f0@mail.gmail.com" list="org.apache.hadoop.core-user" id="24bvb5olv5kuhsi7" type="users" date="2009-05-28T15:28:05+01:00" year="2009-01-01" year-month="2009-05-01" year-month-day="2009-05-28" thread-id="24bvb5olv5kuhsi7"><headers><envelope-from-line>Thu May 28 06:28:37 2009</envelope-from-line><from personal="Tom White" address="tom@cloudera.com">Tom White &lt;tom@cloudera.com&gt;</from><to personal="core-user@hadoop.apache.org" address="core-user@hadoop.apache.org">core-user@hadoop.apache.org</to><subject normal="SequenceFile and streaming">Re: SequenceFile and streaming</subject><received>from srv-117c-be06.markmail.marklogic.com ([172.19.8.46])
          by mail-1.a.markmail.int (JAMES SMTP Server 2.3.1) with SMTP ID 268
          for &lt;lon.carroll.carlson@a.markmail.org&gt;;
          Thu, 28 May 2009 06:28:37 -0800 (GMT-08:00)</received><received>from mail.apache.org (slb-117n.markmail.marklogic.com [172.19.8.33])
	by mgw-1.public.markmail.int (Postfix) with SMTP id 5A39C2908214
	for &lt;lon.carroll.carlson@a.markmail.org&gt;; Thu, 28 May 2009 07:28:14 -0700 (PDT)</received><received>(qmail 7805 invoked by uid 500); 28 May 2009 14:28:36 -0000</received><mailing-list>contact core-user-help@hadoop.apache.org; run by ezmlm</mailing-list><precedence>bulk</precedence><list-help>&lt;mailto:core-user-help@hadoop.apache.org&gt;</list-help><list-unsubscribe>&lt;mailto:core-user-unsubscribe@hadoop.apache.org&gt;</list-unsubscribe><list-post>&lt;mailto:core-user@hadoop.apache.org&gt;</list-post><list-id>&lt;core-user.hadoop.apache.org&gt;</list-id><reply-to>core-user@hadoop.apache.org</reply-to><delivered-to>mailing list core-user@hadoop.apache.org</delivered-to><received>(qmail 7795 invoked by uid 99); 28 May 2009 14:28:36 -0000</received><received>from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 May 2009 14:28:36 +0000</received><x-asf-spam-status>No, hits=-0.0 required=10.0
	tests=SPF_PASS</x-asf-spam-status><x-spam-check-by>apache.org</x-spam-check-by><received-spf>pass (nike.apache.org: local policy)</received-spf><received>from [209.85.220.159] (HELO mail-fx0-f159.google.com) (209.85.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 May 2009 14:28:26 +0000</received><received>by fxm3 with SMTP id 3so733611fxm.29
        for &lt;core-user@hadoop.apache.org&gt;; Thu, 28 May 2009 07:28:06 -0700 (PDT)</received><mime-version>1.0</mime-version><received>by 10.204.53.141 with SMTP id m13mr1287821bkg.11.1243520885588; Thu, 
	28 May 2009 07:28:05 -0700 (PDT)</received><in-reply-to>&lt;1243489935.4837.49.camel@dirac.home&gt;</in-reply-to><references>&lt;1243489935.4837.49.camel@dirac.home&gt;</references><date>Thu, 28 May 2009 15:28:05 +0100</date><message-id>ac79ea400905280728t1c4f5d6gebb18b2e888b38f0@mail.gmail.com</message-id><content-type>text/plain; charset=ISO-8859-1</content-type><content-transfer-encoding>quoted-printable</content-transfer-encoding><x-virus-checked>Checked by ClamAV on apache.org</x-virus-checked></headers><normalized-references><normalized-message-id>ac79ea400905280728t1c4f5d6gebb18b2e888b38f0@mail.gmail.com</normalized-message-id><normalized-in-reply-to>1243489935.4837.49.camel@dirac.home</normalized-in-reply-to><normalized-reference>1243489935.4837.49.camel@dirac.home</normalized-reference></normalized-references><body type="text/plain; charset=iso-8859-1"><greeting depth="0">Hi Walter,
</greeting><para depth="0">
On Thu, May 28, 2009 at 6:52 AM, walter steffe &lt;<email>steffe@tiscali.it</email>&gt; wrote:
</para><quote depth="1"><quotepara depth="1">Hello
 I am a new user and I would like to use hadoop streaming with
SequenceFile in both input and output side.

</quotepara><quotepara depth="1">-The first difficoulty arises from the lack of a simple tool to generate
a SequenceFile starting from a set of files in a given directory.
I would like to have something similar to "tar -cvf file.tar foo/"
This should work also in the opposite direction like "tar -xvf file.tar"
</quotepara></quote><para depth="0">
There's a tool for turning tar files into sequence files here:
<url>http://stuartsierra.com/2008/04/24/a-million-little-files</url>

</para><quote depth="1"><quotepara depth="1">-An other important feature that I would like to see is the possibility
to feed the mapper stdin with the whole content of a file (extracted
from the file SequenceFile) disregarding the key.
</quotepara></quote><para depth="0">
Have a look at SequenceFileAsTextInputFormat which will do this for
you (except the key is the sequence file's key).

</para><quote depth="1"><quotepara depth="1">Using each file as a tar archive I it would like to be able to do:

</quotepara><quotepara depth="1"> $HADOOP_HOME/bin/hadoop  jar $HADOOP_HOME/hadoop-streaming.jar \
                 -input "/user/me/inputSequenceFile"  \
                 -output "/user/me/outputSequenceFile"  \
                 -inputformat SequenceFile
                 -outputformat SequenceFile
                 -mapper myscript.sh
                 -reducer NONE

</quotepara><quotepara depth="1"> myscrip.sh should work as a filter which takes its input from
 stdin and put the output on stdout:

</quotepara><quotepara depth="1"> tar -x
 "do something on the generated dir and create an outputfile"
 cat outputfile

</quotepara><quotepara depth="1">The output file should (automatically) go into the outputSequenceFile.

</quotepara><quotepara depth="1">I think that this would be a very usefull schema which fits well with
the mapreduce requirements on one side and with the unix commands on the
other side. It should not be too difficoult to implement the tools
needed for that.
</quotepara></quote><para depth="0">
I totally agree - having more tools to better integrate sequence files
and map files with unix tools would be very handy.

</para><para depth="0">Tom

</para><quote depth="1"><quotefooter type="signature" depth="1" hash="2043194657945940304">Walter

</quotefooter></quote></body></message>