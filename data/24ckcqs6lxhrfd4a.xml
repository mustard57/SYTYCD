<message message-id="E1F6Aeo-0007x8-LG@xenbits.xensource.com" list="com.xensource.lists.xen-changelog" id="24ckcqs6lxhrfd4a" type="checkins" date="2006-02-06T18:00:10Z" year="2006-01-01" year-month="2006-02-01" year-month-day="2006-02-06" thread-id="24ckcqs6lxhrfd4a"><headers><envelope-from-line>From xen-changelog-bounces@lists.xensource.com Mon Feb 06 18:11:49 2006</envelope-from-line><from personal="Xen patchbot -unstable" address="patchbot-unstable@lists.xensource.com">Xen patchbot -unstable &lt;patchbot-unstable@lists.xensource.com&gt;</from><to personal="xen-changelog@lists.xensource.com" address="xen-changelog@lists.xensource.com">xen-changelog@lists.xensource.com</to><subject normal="[Xen-changelog] Temporary fix to include PTY support in domU builds.">[Xen-changelog] Temporary fix to include PTY support in domU builds.</subject><return-path>xen-changelog-bounces@lists.xensource.com</return-path><envelope-to>www-data@lists.xensource.com</envelope-to><delivery-date>Mon, 06 Feb 2006 18:11:49 +0000</delivery-date><received>from localhost ([127.0.0.1] helo=lists.xensource.com)
	by host-192-168-0-1-bcn-london with esmtp (Exim 4.50)
	id 1F6Aq5-000893-PF; Mon, 06 Feb 2006 18:11:49 +0000</received><received>from host-192-168-0-12-bcn-london ([192.168.0.12]
	helo=xenbits.xensource.com)
	by host-192-168-0-1-bcn-london with esmtp (Exim 4.50)
	id 1F6Apr-00082J-JU
	for xen-changelog@lists.xensource.com; Mon, 06 Feb 2006 18:11:35 +0000</received><received>from xen by xenbits.xensource.com with local (Exim 4.43)
	id 1F6Aeo-0007x8-LG
	for xen-changelog@lists.xensource.com; Mon, 06 Feb 2006 18:00:11 +0000</received><date>Mon, 06 Feb 2006 18:00:10 +0000</date><message-id>E1F6Aeo-0007x8-LG@xenbits.xensource.com</message-id><x-beenthere>xen-changelog@lists.xensource.com</x-beenthere><x-mailman-version>2.1.5</x-mailman-version><precedence>list</precedence><reply-to>xen-devel@lists.xensource.com</reply-to><list-id>BK change log &lt;xen-changelog.lists.xensource.com&gt;</list-id><list-unsubscribe>&lt;http://lists.xensource.com/cgi-bin/mailman/listinfo/xen-changelog&gt;,
	&lt;mailto:xen-changelog-request@lists.xensource.com?subject=unsubscribe&gt;</list-unsubscribe><list-post>&lt;mailto:xen-changelog@lists.xensource.com&gt;</list-post><list-help>&lt;mailto:xen-changelog-request@lists.xensource.com?subject=help&gt;</list-help><list-subscribe>&lt;http://lists.xensource.com/cgi-bin/mailman/listinfo/xen-changelog&gt;,
	&lt;mailto:xen-changelog-request@lists.xensource.com?subject=subscribe&gt;</list-subscribe><sender>xen-changelog-bounces@lists.xensource.com</sender><errors-to>xen-changelog-bounces@lists.xensource.com</errors-to></headers><normalized-references><normalized-message-id>E1F6Aeo-0007x8-LG@xenbits.xensource.com</normalized-message-id></normalized-references><body type="text/plain"><para depth="0"># HG changeset patch
# User <email>kaf24@firebug.cl.cam.ac.uk</email>
# Node ID c5fd98fcb127f5de28312ed8a36e67b31c74dca2
# Parent  bf176086255baefd27f223a9a5b88c27896fa7ce
Temporary fix to include PTY support in domU builds.

</para><para depth="0">Signed-off-by: Keir Fraser &lt;<email>keir@xensource.com</email>&gt;

</para><para depth="0">diff -r bf176086255b -r c5fd98fcb127 buildconfigs/linux-defconfig_xenU_x86_32
--- a/buildconfigs/linux-defconfig_xenU_x86_32	Sat Feb  4 09:58:28 2006
+++ b/buildconfigs/linux-defconfig_xenU_x86_32	Mon Feb  6 13:52:45 2006
@@ -1,7 +1,7 @@
 #
 # Automatically generated make config: don't edit
 # Linux kernel version: 2.6.16-rc2-xenU
-# Fri Feb  3 16:57:27 2006
+# Mon Feb  6 13:25:40 2006
 #
 CONFIG_X86_32=y
 CONFIG_SEMAPHORE_SLEEPERS=y
@@ -381,6 +381,9 @@
 # CONFIG_NETCONSOLE is not set
 # CONFIG_NETPOLL is not set
 # CONFIG_NET_POLL_CONTROLLER is not set
+CONFIG_UNIX98_PTYS=y
+CONFIG_LEGACY_PTYS=y
+CONFIG_LEGACY_PTY_COUNT=256

</para><para depth="0"> #
 # SN Devices
diff -r bf176086255b -r c5fd98fcb127 buildconfigs/linux-defconfig_xenU_x86_64
--- a/buildconfigs/linux-defconfig_xenU_x86_64	Sat Feb  4 09:58:28 2006
+++ b/buildconfigs/linux-defconfig_xenU_x86_64	Mon Feb  6 13:52:45 2006
@@ -600,6 +600,9 @@
 # Wan interfaces
 #
 # CONFIG_WAN is not set
+CONFIG_UNIX98_PTYS=y
+CONFIG_LEGACY_PTYS=y
+CONFIG_LEGACY_PTY_COUNT=256

</para><para depth="0"> #
 # ATM drivers
diff -r bf176086255b -r c5fd98fcb127 linux-2.6-xen-sparse/drivers/Kconfig
--- a/linux-2.6-xen-sparse/drivers/Kconfig	Sat Feb  4 09:58:28 2006
+++ b/linux-2.6-xen-sparse/drivers/Kconfig	Mon Feb  6 13:52:45 2006
@@ -77,6 +77,20 @@
 source "drivers/infiniband/Kconfig"
 endif

</para><para depth="0">+if XEN &amp;&amp; !XEN_PHYSDEV_ACCESS
+# Gross hack. Fix later by allowing unprivileged guest to include
+# char/Kconfig without breaking the build.
+config UNIX98_PTYS
+        bool
+        default y
+config LEGACY_PTYS
+        bool
+        default y
+config LEGACY_PTY_COUNT
+        int
+        default "256"
+endif
+
 source "drivers/sn/Kconfig"

</para><para depth="0"> source "drivers/edac/Kconfig"

</para><footer type="list-management" depth="0">_______________________________________________
Xen-changelog mailing list
<email>Xen-changelog@lists.xensource.com</email>
<url>http://lists.xensource.com/xen-changelog</url>

</footer></body></message>