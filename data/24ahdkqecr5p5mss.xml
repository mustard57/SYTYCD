<message message-id="29517271.1204895877920.JavaMail.jira@cloud.prod.atl2.jboss.com" list="org.jboss.lists.jboss-jira" id="24ahdkqecr5p5mss" type="bugs" date="2008-03-07T08:18:05" year="2008-01-01" year-month="2008-03-01" year-month-day="2008-03-07" thread-id="auifbz7t6pfezuox"><headers><envelope-from-line>From jira-events@lists.jboss.org  Fri Mar  7 08:17:57 2008</envelope-from-line><from personal="Juha Lindfors (JIRA)" address="jira-events@lists.jboss.org">"Juha Lindfors (JIRA)" &lt;jira-events@lists.jboss.org&gt;</from><subject normal="[jboss-jira] [JBoss JIRA] Commented: (JBAS-4434) Create tests of file locking in the deploy dir">[jboss-jira] [JBoss JIRA] Commented: (JBAS-4434) Create tests of file locking in the deploy dir</subject><x-spam-checker-version>SpamAssassin 3.2.4 (2008-01-01) on
	spam-1.dev.markmail.int</x-spam-checker-version><x-spam-level/><x-spam-status>No, score=-1.8 required=5.0 tests=BAYES_00,INVALID_DATE,
	MISSING_HEADERS,NO_RECEIVED,NO_RELAYS autolearn=disabled version=3.2.4</x-spam-status><date>Fri Mar  7 08:18:05 2008</date><in-reply-to>&lt;22017107.1179762892464.JavaMail.jira@cloud.prod.atl2.jboss.com&gt;</in-reply-to><message-id>29517271.1204895877920.JavaMail.jira@cloud.prod.atl2.jboss.com</message-id><content-type>text/plain; charset=iso-8859-1</content-type><mime-version>1.0</mime-version></headers><normalized-references><normalized-message-id>29517271.1204895877920.JavaMail.jira@cloud.prod.atl2.jboss.com</normalized-message-id><normalized-in-reply-to>22017107.1179762892464.JavaMail.jira@cloud.prod.atl2.jboss.com</normalized-in-reply-to></normalized-references><body type="text/plain; charset=iso-8859-1"><para depth="0">
[ <url>http://jira.jboss.com/jira/browse/JBAS-4434?page=comments#action_12401756</url> ] 

</para><para depth="0">Juha Lindfors commented on JBAS-4434:
</para><footer type="noise" depth="0">-------------------------------------

</footer><para depth="0">If anyone is taking on this task -- not holding my breath -- exploded WAR<br/>deployment locks JAR files from WEB-INF/lib directory as soon as the servlet is<br/>loaded. Relatively simple to test on WindowsXP + JBoss AS 4.2.2.GA combo.

</para><quote depth="1"><quotepara depth="1">Create tests of file locking in the deploy dir
</quotepara><quotepara depth="1">----------------------------------------------

</quotepara><quotepara depth="1">                Key: JBAS-4434
                URL: <url>http://jira.jboss.com/jira/browse/JBAS-4434</url>
            Project: JBoss Application Server
         Issue Type: Task
     Security Level: Public(Everyone can see) 
         Components: Test Suite
           Reporter: Brian Stansberry

</quotepara><quotepara depth="1">Need simple tests where different sorts of deployments are copied to deploy,<br/>allowed to deploy, and then deleted.  Intent is to prove that the file in the<br/>deploy dir can be deleted; i.e. the deployment process doesn't create a file<br/>lock.
Most AS tests today do deployments via the RMIAdaptor, an approach that doesn't<br/>detect file lock issues.
See JBAS--4415 and EJBTHREE-969 for an example of where this broke down. The<br/>FarmService tests have to use a 'copy file to farm dir' approach, so they<br/>detected a file lock issue.  But this kind of problem should be directly tested<br/>so it's easier to know when problems like EJBTHREE-969 creep in. Also the<br/>FarmService test only deploys one jar; if by chance it had been a war instead of<br/>an ejb jar, the problem would not have been detected, since the JBossWeb<br/>deployer would have handled the war before accepts() was called on the<br/>Ejb3Deployer.
</quotepara></quote><footer type="noise" depth="0">
</footer><footer type="signature" depth="0" hash="13680380643405763944">-- 
This message is automatically generated by JIRA.
-
If you think it was sent incorrectly contact one of the administrators:<br/><url>http://jira.jboss.com/jira/secure/Administrators.jspa</url>
-
For more information on JIRA, see: <url>http://www.atlassian.com/software/jira</url>

</footer></body></message>