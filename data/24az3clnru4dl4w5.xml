<message message-id="Pine.BSF.3.91.960829154946.18074B-100000@tombstone.sunrem.com" list="org.freebsd.freebsd-hackers" id="24az3clnru4dl4w5" type="development" date="1996-08-29T16:36:21-06:00" year="1996-01-01" year-month="1996-08-01" year-month-day="1996-08-29" thread-id="xsvdx4xlipuudts3"><headers><envelope-from-line>From owner-freebsd-hackers  Thu Aug 29 15:41:29 1996</envelope-from-line><from personal="Brandon Gillespie" address="brandon@tombstone.sunrem.com">Brandon Gillespie &lt;brandon@tombstone.sunrem.com&gt;</from><to personal="Nate Williams" address="nate@mt.sri.com">Nate Williams &lt;nate@mt.sri.com&gt;</to><cc personal="hackers@freebsd.org" address="hackers@freebsd.org">hackers@freebsd.org</cc><subject normal="'Backwards' DES support for crypt(), while still using better , algo's">Re: 'Backwards' DES support for crypt(), while still using better , algo's</subject><return-path>owner-hackers</return-path><received>(from root@localhost)
          by freefall.freebsd.org (8.7.5/8.7.3) id PAA12800
          for hackers-outgoing; Thu, 29 Aug 1996 15:41:29 -0700 (PDT)</received><received>from mail.crl.com (mail.crl.com [165.113.1.22])
          by freefall.freebsd.org (8.7.5/8.7.3) with SMTP id PAA12794
          for &lt;hackers@freebsd.org&gt;; Thu, 29 Aug 1996 15:41:27 -0700 (PDT)</received><received>from tombstone.sunrem.com by mail.crl.com with SMTP id AA06205
  (5.65c/IDA-1.5 for &lt;hackers@freebsd.org&gt;); Thu, 29 Aug 1996 15:39:52 -0700</received><received>(from brandon@localhost) by tombstone.sunrem.com (8.7.5/8.7.3) id QAA18149; Thu, 29 Aug 1996 16:36:22 -0600 (MDT)</received><date>Thu, 29 Aug 1996 16:36:21 -0600 (MDT)</date><in-reply-to>&lt;199608292126.PAA08439@rocky.mt.sri.com&gt;</in-reply-to><message-id>Pine.BSF.3.91.960829154946.18074B-100000@tombstone.sunrem.com</message-id><mime-version>1.0</mime-version><content-type>TEXT/PLAIN; charset=US-ASCII</content-type><sender>owner-hackers@freebsd.org</sender><x-loop>FreeBSD.org</x-loop><precedence>bulk</precedence></headers><normalized-references><normalized-message-id>Pine.BSF.3.91.960829154946.18074B-100000@tombstone.sunrem.com</normalized-message-id><normalized-in-reply-to>199608292126.PAA08439@rocky.mt.sri.com</normalized-in-reply-to></normalized-references><body type="text/plain; charset=us-ascii"><para depth="0">On Thu, 29 Aug 1996, Nate Williams wrote:
</para><quote depth="1"><quotepara depth="1">This is a non-standard case.  Most folks have all of one or the other.
</quotepara></quote><para depth="0">
Yes, but ONLY because we dont have any other option!

</para><para depth="0">Once again, what I am suggesting is that--WHEN USING FreeBSD-centric
password files--we have a package that you can drop in for DES passwords
WITH the FreeBSD centric format.  Right now when you drop DES in DES 
becomes the default, and from that point forward everything is DES, 
although it will still read MD5 passwords changing a password will make 
it a DES password.

</para><para depth="0">I can see the reasons for having a complete DES oriented system. However I
can also see the reasons for having a progressive oriented system,
defaulting to the best algorithm rather than the worst--while still 
handling older algorithms.  To make it upwardly scaleable you have to:

</para><para depth="0">  1) not hook other programs into the crypt version, simply have them
     feed the existing password as the seed when matching passwords, and
  2) NOT assume any version when creating a seed (passwd will force '$1$'
     currently).
  3) allow crypt() to default to the most desired algorithm, then programs
     such as 'passwd' can create a common seed and feed it to crypt, getting
     back the best encryption algorithm.

</para><para depth="0">I think this should be the default behaviour, unless a 'DES-only' package
or option is installed, which would generally imply you do not want ANY of
the progressive password formats anyway (due to network services and
compatability with other systems).

</para><para depth="0">The reason for this behaviour is rather relevant, in my opinion.  If you
ever want to convert an existing DES-based system to FreeBSD you have to
stay completely DES based--you cannot switch to better passwd algorithms
because of the default behaviour of crypt() (explained above). 

</para><para depth="0">Furthermore there are systems that currently use DES for one reason or
another which may want to use better algorithms, but they cannot without
doing a massive passwd change as they remove DES password support--just
because the way crypt() defaults it will always use DES not something
better. 

</para><para depth="0">What I am trying to target is those people trying to go from DES to 
something better.  Right now this is not a possibility.  There are also 
systems that dont care about anything else, and dont want to care about 
anything else, this is also fine.  Frankly there is already not a middle 
line, it is one way or the other.

</para><para depth="0">Perhaps this would be better solved if the behaviour of crypt were 
managed through something in /etc, such as the existence of:

</para><para depth="0">     /etc/crypt.DES

</para><para depth="0">Which would cause crypt() to default DES (like it does now), and if this 
file did not exist crypt() would default to the latest/best algorithm it 
knows of.

</para><footer type="signature" hash="16797684899971350018" depth="0">-Brandon Gillespie

</footer><para depth="0">(I'm so heated about this because I have several systems which have DES
passwords installed because they were originally Linux, and have a large
user base.  I would rather they use MD5 or SHA-1 passwords, but short of
hacking passwd to force that in the future they will stay DES based). 

</para></body></message>