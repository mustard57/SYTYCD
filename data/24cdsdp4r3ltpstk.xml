<message message-id="4bbb4c5f-4997-40d8-b59b-30c883f831b7@r21g2000pri.googlegroups.com" list="com.googlegroups.mongodb-user" id="24cdsdp4r3ltpstk" type="users" date="2011-07-01T11:20:32-07:00" year="2011-01-01" year-month="2011-07-01" year-month-day="2011-07-01" thread-id="k27iogza5ruddyhz"><headers><envelope-from-line>Fri Jul 01 10:34:33 2011</envelope-from-line><from personal="Mark Kwan" address="&quot;mark.k...&quot;@gmail.com">Mark Kwan &lt;"mark.k..."@gmail.com&gt;</from><to personal="mongodb-user" address="mongodb-user@googlegroups.com">mongodb-user &lt;mongodb-user@googlegroups.com&gt;</to><subject normal="Moving config servers with zero downtime?">Re: Moving config servers with zero downtime?</subject><received>from srv-117c-be06.markmail.marklogic.com ([172.19.8.46])
          by mail-1.a.markmail.int (JAMES SMTP Server 2.3.1) with SMTP ID 819
          for &lt;hans.mercado.sharp@a.markmail.org&gt;;
          Fri, 1 Jul 2011 10:34:33 -0800 (GMT-08:00)</received><received>from crawl-1.a.markmail.int (slb-117n.markmail.marklogic.com [172.19.8.33])
	by mgw-1.public.markmail.int (Postfix) with ESMTP id 00E6A290808B
	for &lt;hans.mercado.sharp@a.markmail.org&gt;; Fri,  1 Jul 2011 11:34:10 -0700 (PDT)</received><received>from crawl-1.a.markmail.int (localhost.localdomain [127.0.0.1])
	by crawl-1.a.markmail.int (Postfix) with ESMTP id CB64A63B014E
	for &lt;hans.mercado.sharp@a.markmail.org&gt;; Fri,  1 Jul 2011 11:34:09 -0700 (PDT)</received><received>(from crawler@localhost)
	by crawl-1.a.markmail.int (8.13.8/8.13.8/Submit) id p61IY9sX017445
	for hans.mercado.sharp@a.markmail.org; Fri, 1 Jul 2011 11:34:09 -0700</received><x-authentication-warning>crawl-1.a.markmail.int: crawler set sender to root@localhost using -r</x-authentication-warning><x-markmail-googlegroups-list>com.googlegroups.mongodb-user</x-markmail-googlegroups-list><x-markmail-googlegroups-mid>addeb7c7ec63c2a9</x-markmail-googlegroups-mid><received>by 10.68.42.98 with SMTP id n2mr377260pbl.19.1309544444367;
        Fri, 01 Jul 2011 11:20:44 -0700 (PDT)</received><x-beenthere>mongodb-user@googlegroups.com</x-beenthere><received>by 10.142.245.21 with SMTP id s21ls927436wfh.0.gmail; Fri, 01 Jul
 2011 11:20:33 -0700 (PDT)</received><mime-version>1.0</mime-version><received>by 10.142.174.7 with SMTP id w7mr648541wfe.60.1309544432978; Fri, 01
 Jul 2011 11:20:32 -0700 (PDT)</received><received>by r21g2000pri.googlegroups.com with HTTP; Fri, 1 Jul 2011 11:20:32
 -0700 (PDT)</received><date>Fri, 1 Jul 2011 11:20:32 -0700 (PDT)</date><in-reply-to>&lt;3cf3022f-9d94-45f6-b764-3f5c30e2caa9@v11g2000prn.googlegroups.com&gt;</in-reply-to><references>&lt;9b1b5a7c-6ded-4710-97cc-f16beb3cc84c@z7g2000prh.googlegroups.com&gt;
 &lt;BANLkTinrhWOFHBhzrTD4s463iF9TZk4OdA@mail.gmail.com&gt; &lt;3cf3022f-9d94-45f6-b764-3f5c30e2caa9@v11g2000prn.googlegroups.com&gt;</references><user-agent>G2/1.0</user-agent><x-http-useragent>Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/534.30
 (KHTML, like Gecko) Chrome/12.0.742.100 Safari/534.30,gzip(gfe)</x-http-useragent><message-id>4bbb4c5f-4997-40d8-b59b-30c883f831b7@r21g2000pri.googlegroups.com</message-id><content-type>text/plain; charset=ISO-8859-1</content-type><content-transfer-encoding>quoted-printable</content-transfer-encoding></headers><normalized-references><normalized-message-id>4bbb4c5f-4997-40d8-b59b-30c883f831b7@r21g2000pri.googlegroups.com</normalized-message-id><normalized-in-reply-to>3cf3022f-9d94-45f6-b764-3f5c30e2caa9@v11g2000prn.googlegroups.com</normalized-in-reply-to><normalized-reference>9b1b5a7c-6ded-4710-97cc-f16beb3cc84c@z7g2000prh.googlegroups.com</normalized-reference><normalized-reference>BANLkTinrhWOFHBhzrTD4s463iF9TZk4OdA@mail.gmail.com</normalized-reference><normalized-reference>3cf3022f-9d94-45f6-b764-3f5c30e2caa9@v11g2000prn.googlegroups.com</normalized-reference></normalized-references><body type="text/plain; charset=iso-8859-1"><para depth="0">Hmm, anymore clarification on whether all services actually need to be
shut down at the same time, or if they all simply need to be restarted
at some point?

</para><footer type="signature" depth="0" hash="13898206274103396993">On Jun 30, 2:14 am, Mark Kwan &lt;<email>mark.k...@gmail.com</email>&gt; wrote:
</footer><quote depth="1"><quotepara depth="1">Is there any way to change theconfigserver url with zero downtime?

</quotepara><quotepara depth="1">What is the reason for needing to restart the mongod processes?

</quotepara><quotepara depth="1">Do all processes need to be stopped at the same time or does each
service just need to be restarted with the newconfigserver
information?  ie. If I'm using replica sets in the shards, can I just
restart each replica one at a time?

</quotepara><quotepara depth="1">On Jun 29, 5:31 am, Eliot Horowitz &lt;<email>eliothorow...@gmail.com</email>&gt; wrote:

</quotepara><quote depth="2"><quotepara depth="2">What address did you use for theconfigserver?
If you used dns entries and can just re-point dns, then what you list
below will work fine.
Only if you need to actually change theconfigserver url is it a problem.
</quotepara></quote><quotefooter type="noise" depth="1">
</quotefooter><quote depth="2"><quotepara depth="2">On Wed, Jun 29, 2011 at 4:57 AM, Mark Kwan &lt;<email>mark.k...@gmail.com</email>&gt; wrote:
</quotepara><quote depth="3"><quotepara depth="3">According to the documentation, it seems like you have to shut
everything down in order to move aconfigserver from one machine to
another.
<url>http://www.mongodb.org/display/DOCS/Changing+Config+Servers</url>
</quotepara></quote></quote><quotefooter type="noise" depth="1">
</quotefooter><quote depth="2"><quote depth="3"><quotepara depth="3">However, from the documentation, I'm not sure why the mongod's need to
be shut down?
</quotepara></quote></quote><quotefooter type="noise" depth="1">
</quotefooter><quote depth="2"><quote depth="3"><quotepara depth="3">Would it be possible to just do:
1) Turn off balancing - db.settings.update({_id:"balancer"},{$set :
{stopped:true}}, true)
2) mongodump from oneconfigserver
3) mongorestore to the newconfigserver
4) Start configsvr on new machine
5) Restart each mongos but including the newconfigserver and
ignoring the old one
6) Turn balancing back on
</quotepara></quote></quote><quotefooter type="noise" depth="1">
</quotefooter><quote depth="2"><quote depth="3"><quotepara depth="3">Am I missing some dependency that would not allow this zero downtime
(assuming you're running multiple mongos processes) method to work?
</quotepara></quote></quote><quotefooter type="noise" depth="1">
</quotefooter><quote depth="2"><quote depth="3"><quotepara depth="3">Also is there anything specific to know about mongodumping/restoring a
configserver?
</quotepara></quote></quote><quotefooter type="noise" depth="1">
</quotefooter><quote depth="2"><quote depth="3"><quotefooter type="list-management" depth="3">--
You received this message because you are subscribed to the Google Groups<br/>"mongodb-user" group.
To post to this group, send email to <email>mongodb-user@googlegroups.com</email>.
To unsubscribe from this group, send email to<br/>mongodb-user+<email>unsubscribe@googlegroups.com</email>.
For more options, visit this group athttp://groups.google.com/group/m
</quotefooter></quote></quote></quote></body></message>