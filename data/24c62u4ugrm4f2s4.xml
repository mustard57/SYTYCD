<message message-id="95e8b93711066478d102a9f149b07167@ehatchersolutions.com" list="org.apache.lucene.java-user" id="24c62u4ugrm4f2s4" type="users" date="2005-02-16T15:14:26-05:00" year="2005-01-01" year-month="2005-02-01" year-month-day="2005-02-16" thread-id="au5gz33qfufkjnde"><headers><envelope-from-line>From lucene-user-return-13216-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Feb 16 20:15:02 2005</envelope-from-line><from personal="Erik Hatcher" address="erik@ehatchersolutions.com">Erik Hatcher &lt;erik@ehatchersolutions.com&gt;</from><to personal="Lucene Users List" address="lucene-user@jakarta.apache.org">Lucene Users List &lt;lucene-user@jakarta.apache.org&gt;</to><subject normal="big index and multi threaded IndexSearcher">Re: big index and multi threaded IndexSearcher</subject><return-path>lucene-user-return-13216-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org</return-path><delivered-to>apmail-jakarta-lucene-user-archive@www.apache.org</delivered-to><received>(qmail 95917 invoked from network); 16 Feb 2005 20:15:02 -0000</received><received>from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Feb 2005 20:15:02 -0000</received><received>(qmail 72736 invoked by uid 500); 16 Feb 2005 20:14:59 -0000</received><delivered-to>apmail-jakarta-lucene-user-archive@jakarta.apache.org</delivered-to><received>(qmail 72388 invoked by uid 500); 16 Feb 2005 20:14:58 -0000</received><mailing-list>contact lucene-user-help@jakarta.apache.org; run by ezmlm</mailing-list><precedence>bulk</precedence><list-unsubscribe>&lt;mailto:lucene-user-unsubscribe@jakarta.apache.org&gt;</list-unsubscribe><list-subscribe>&lt;mailto:lucene-user-subscribe@jakarta.apache.org&gt;</list-subscribe><list-help>&lt;mailto:lucene-user-help@jakarta.apache.org&gt;</list-help><list-post>&lt;mailto:lucene-user@jakarta.apache.org&gt;</list-post><list-id>"Lucene Users List" &lt;lucene-user.jakarta.apache.org&gt;</list-id><reply-to>"Lucene Users List" &lt;lucene-user@jakarta.apache.org&gt;</reply-to><delivered-to>mailing list lucene-user@jakarta.apache.org</delivered-to><received>(qmail 72374 invoked by uid 99); 16 Feb 2005 20:14:58 -0000</received><x-asf-spam-status>No, hits=0.0 required=10.0
	tests=</x-asf-spam-status><x-spam-check-by>apache.org</x-spam-check-by><received-spf>pass (hermes.apache.org: local policy)</received-spf><received>from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 16 Feb 2005 12:14:56 -0800</received><received>by ehatchersolutions.com (Postfix, from userid 504)
	id 577DE13E2009; Wed, 16 Feb 2005 15:14:52 -0500 (EST)</received><received>from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 80B6713E2008
	for &lt;lucene-user@jakarta.apache.org&gt;; Wed, 16 Feb 2005 15:14:32 -0500 (EST)</received><mime-version>1.0 (Apple Message framework v619.2)</mime-version><in-reply-to>&lt;11710702445.20050216220456@altervision.biz&gt;</in-reply-to><references>&lt;11710702445.20050216220456@altervision.biz&gt;</references><content-type>text/plain; charset=US-ASCII; format=flowed</content-type><message-id>95e8b93711066478d102a9f149b07167@ehatchersolutions.com</message-id><content-transfer-encoding>7bit</content-transfer-encoding><date>Wed, 16 Feb 2005 15:14:26 -0500</date><x-mailer>Apple Mail (2.619.2)</x-mailer><x-spam-checker-version>SpamAssassin 3.0.1 (2004-10-22) on javelina</x-spam-checker-version><x-spam-status>No, score=-3.4 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1</x-spam-status><x-spam-level/><x-virus-checked>Checked</x-virus-checked><x-spam-rating>minotaur-2.apache.org 1.6.2 0/1000/N</x-spam-rating></headers><normalized-references><normalized-message-id>95e8b93711066478d102a9f149b07167@ehatchersolutions.com</normalized-message-id><normalized-in-reply-to>11710702445.20050216220456@altervision.biz</normalized-in-reply-to><normalized-reference>11710702445.20050216220456@altervision.biz</normalized-reference></normalized-references><body type="text/plain; charset=us-ascii; format=flowed"><para depth="0">Are you using multiple IndexSearcher instances?    Or only one and 
sharing it across multiple threads?

</para><para depth="0">If using a single shared IndexSearcher instance doesn't help, it may be 
beneficial to port your code to Java and try it there.

</para><para depth="0">I'm just now getting into PyLucene myself - building a demo for a Unix 
User's Group presentation I'm giving.

</para><para depth="0">	Erik

</para><para depth="0">On Feb 16, 2005, at 3:04 PM, Yura Smolsky wrote:

</para><quote depth="1"><quotepara depth="1">Hello.

</quotepara><quotepara depth="1">I use PyLucene, python port of Lucene.

</quotepara><quotepara depth="1">I have problem about using big index (50Gb) with IndexSearcher
from many threads.
I use IndexSearcher from PyLucene's PythonThread. It's really a wrapper
around a Java/libgcj thread that python is tricked into thinking
it's one of its own.

</quotepara><quotepara depth="1">The core of problem:
When I have many threads (more than 5) I receive this exception:
  File "/usr/lib/python2.4/site-packages/PyLucene.py", line 2241, in 
search
    def search(*args): return _PyLucene.Searcher_search(*args)
ValueError: java.lang.OutOfMemoryError
   &lt;&lt;No stacktrace available&gt;&gt;

</quotepara><quotepara depth="1">When I decrease number of threads to 3 or even 1 then search works.
How do many threads can affect to this exception?..

</quotepara><quotepara depth="1">I have 2 Gb of memory. So with one thread the process takes like
1200-1300Mb.

</quotepara><quotepara depth="1">Andi Vajda suggested that "There may be overhead involved in having
multiple threads against a given index."

</quotepara><quotepara depth="1">Does anyone here have experience in handling big indexes with many
threads?

</quotepara><quotepara depth="1">Any ideas are appreciated.

</quotepara><quotefooter type="signature" hash="3042865687341640400" depth="1">Yura Smolsky.

</quotefooter><quotefooter type="list-management" hash="5021753451341457020" depth="1">---------------------------------------------------------------------
To unsubscribe, e-mail: <email>lucene-user-unsubscribe@jakarta.apache.org</email>
For additional commands, e-mail: <email>lucene-user-help@jakarta.apache.org</email>
</quotefooter></quote><footer type="list-management" depth="0">
---------------------------------------------------------------------
To unsubscribe, e-mail: <email>lucene-user-unsubscribe@jakarta.apache.org</email>
For additional commands, e-mail: <email>lucene-user-help@jakarta.apache.org</email>

</footer></body></message>