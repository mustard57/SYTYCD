<message message-id="cb7bb73a0812180823y5249abcakd419d4fee9942d84@mail.gmail.com" list="org.kernel.vger.git" id="24btgxocxhpek6uz" type="development" date="2008-12-18T08:23:29.040062-08:00" year="2008-01-01" year-month="2008-12-01" year-month-day="2008-12-18" thread-id="4vexmmehazzwegmb"><headers><envelope-from-line>Thu Dec 18 08:23:52 2008</envelope-from-line><from personal="Giuseppe Bilotta" address="giuseppe.bilotta@gmail.com">Giuseppe Bilotta &lt;giuseppe.bilotta@gmail.com&gt;</from><to personal="Jakub Narebski" address="jnareb@gmail.com">Jakub Narebski &lt;jnareb@gmail.com&gt;</to><cc personal="Junio C Hamano" address="gitster@pobox.com">Junio C Hamano &lt;gitster@pobox.com&gt;</cc><subject normal="[PATCHv5 2/3] gitweb: add patches view">Re: [PATCHv5 2/3] gitweb: add patches view</subject><received>from srv-117c-be06.markmail.marklogic.com ([172.19.8.46])
          by mail-1.a.markmail.int (JAMES SMTP Server 2.3.1) with SMTP ID 933
          for &lt;archive.user.45275@a.markmail.org&gt;;
          Thu, 18 Dec 2008 08:23:51 -0800 (GMT-08:00)</received><received>from vger.kernel.org (slb-117n.markmail.marklogic.com [172.19.8.33])
	by mgw-1.public.markmail.int (Postfix) with ESMTP id 7D9102908050
	for &lt;archive.user.45275@a.markmail.org&gt;; Thu, 18 Dec 2008 08:23:28 -0800 (PST)</received><received>(majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1751212AbYLRQXr (ORCPT
	&lt;rfc822;archive.user.45275@a.markmail.org&gt;);
	Thu, 18 Dec 2008 11:23:47 -0500</received><received>(majordomo@vger.kernel.org) by vger.kernel.org id S1751120AbYLRQXr
	(ORCPT &lt;rfc822;git-outgoing&gt;); Thu, 18 Dec 2008 11:23:47 -0500</received><received>from ey-out-2122.google.com ([74.125.78.27]:4615 "EHLO
	ey-out-2122.google.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
	with ESMTP id S1751040AbYLRQXq (ORCPT &lt;rfc822;git@vger.kernel.org&gt;);
	Thu, 18 Dec 2008 11:23:46 -0500</received><received>by ey-out-2122.google.com with SMTP id 22so22495eye.37
        for &lt;git@vger.kernel.org&gt;; Thu, 18 Dec 2008 08:23:43 -0800 (PST)</received><dkim-signature>v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:cc:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=NnBboZU3683OrRKDCUIHdG1Vg+a34772b25YcMw4wsM=;
        b=QXK/py8z5KFmqTCK+Hmh7MyFSvZe0/6t8+2kXWQxX0kiw3D3STExKdSBqmg1liaYYT
         Abf0lyJSRuC9bFCaZRhSp/koaNZHApHlZDET0AH+ghWXjwPswfCEpiFC41sK1yub+sUZ
         gP4rxcnc9sJ8cnn4FsdiK6Pl8rJl3CQROM7Kw=</dkim-signature><domainkey-signature>a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:cc:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=sU2w+c0mJa+B2Cp9SKyodel0K5vacjxaWTcV3GVwnCRDND5hq5h7FmQ+DPNfOD0Ada
         Gy9+W6RVBJ85kgEtBIKKyXIN5DGIxUIBn4gdSR+sAYftDYVZRgFczA/+6IgXTtVYQdvh
         DBv0xc1WRBCZq0byl6RfKTC5AHTYPgRl+Yzbg=</domainkey-signature><received>by 10.210.92.8 with SMTP id p8mr2502222ebb.55.1229617423917;
        Thu, 18 Dec 2008 08:23:43 -0800 (PST)</received><received>by 10.210.136.4 with HTTP; Thu, 18 Dec 2008 08:23:43 -0800 (PST)</received><message-id>cb7bb73a0812180823y5249abcakd419d4fee9942d84@mail.gmail.com</message-id><date>Thu, 18 Dec 2008 17:23:43 +0100</date><in-reply-to>&lt;200812181033.57360.jnareb@gmail.com&gt;</in-reply-to><mime-version>1.0</mime-version><content-type>text/plain; charset=ISO-8859-1</content-type><content-transfer-encoding>7bit</content-transfer-encoding><content-disposition>inline</content-disposition><references>&lt;1229422290-6213-1-git-send-email-giuseppe.bilotta@gmail.com&gt;
	 &lt;1229422290-6213-3-git-send-email-giuseppe.bilotta@gmail.com&gt;
	 &lt;7v4p12hv5q.fsf@gitster.siamese.dyndns.org&gt;
	 &lt;200812181033.57360.jnareb@gmail.com&gt;</references><sender>git-owner@vger.kernel.org</sender><precedence>bulk</precedence><list-id>&lt;git.vger.kernel.org&gt;</list-id><x-mailing-list>git@vger.kernel.org</x-mailing-list></headers><normalized-references><normalized-message-id>cb7bb73a0812180823y5249abcakd419d4fee9942d84@mail.gmail.com</normalized-message-id><normalized-in-reply-to>200812181033.57360.jnareb@gmail.com</normalized-in-reply-to><normalized-reference>1229422290-6213-1-git-send-email-giuseppe.bilotta@gmail.com</normalized-reference><normalized-reference>1229422290-6213-3-git-send-email-giuseppe.bilotta@gmail.com</normalized-reference><normalized-reference>7v4p12hv5q.fsf@gitster.siamese.dyndns.org</normalized-reference><normalized-reference>200812181033.57360.jnareb@gmail.com</normalized-reference></normalized-references><body type="text/plain; charset=iso-8859-1"><para depth="0">On Thu, Dec 18, 2008 at 10:33 AM, Jakub Narebski &lt;<email>jnareb@gmail.com</email>&gt; wrote:
</para><quote depth="1"><quotepara depth="1">On Thu, 18 Dec 2008, Junio C Hamano wrote:
</quotepara><quote depth="2"><quotepara depth="2">Giuseppe Bilotta &lt;<email>giuseppe.bilotta@gmail.com</email>&gt; writes:

</quotepara><quote depth="3"><quotepara depth="3"> sub git_commitdiff {
    my $format = shift || 'html';
+   my %params = @_;
...
+                   if ($params{-single}) {
+                           push @commit_spec, '-1';
+                   } else {
+                           if ($patch_max &gt; 0) {
...
+                   }
@@ -5625,6 +5635,10 @@ sub git_commitdiff_plain {

</quotepara><quotepara depth="3"> # format-patch-style patches
 sub git_patch {
+   git_commitdiff('patch', -single=&gt; 1);
+}
</quotepara></quote><quotepara depth="2">
Hmm, if you are changing the interface this way, wouldn't it make more
sense to also do this?

</quotepara><quotepara depth="2">      git_commitdiff(--format =&gt; 'patch', --single =&gt; 1);
      git_commitdiff(--format =&gt; 'html');
</quotepara></quote><quotepara depth="1">
The first argument (format) is _required_, second is _optional_;
I'd rather use named parameters trick only for optional parameters.
Because with more than one optional parameter function call begins
to be cryptic; also flag (boolean) parameters are more readable
when used as named parameters.
</quotepara></quote><para depth="0">
I have mixed feelings about this: on the one hand we have href() (say)
that takes all its params from a has, but on the other hand we have
esc_html() (say) that takes only additional options from a hash. I'm
personally more inclined towards the latter usage for git_commitdiff
(i.e. this patch) but since the other alternative is straightforward I
sent a v6 of the patchset which implements it.

</para><footer type="signature" depth="0" hash="2479148533359682910">-- 
Giuseppe "Oblomov" Bilotta
</footer><footer type="list-management" depth="0">--
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to <email>majordomo@vger.kernel.org</email>
More majordomo info at  <url>http://vger.kernel.org/majordomo-info.html</url>
</footer></body></message>