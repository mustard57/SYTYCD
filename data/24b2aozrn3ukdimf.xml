<message message-id="571ACEFD467F7749BC50E0A98C17CDD802C06C1E@pdsmsx403" list="com.xensource.lists.xen-ia64-devel" id="24b2aozrn3ukdimf" type="development" date="2006-01-09T23:33:34+08:00" year="2006-01-01" year-month="2006-01-01" year-month-day="2006-01-09" thread-id="dlinjy2nlbsbrwwf"><headers><envelope-from-line>From xen-ia64-devel-bounces@lists.xensource.com Mon Jan 09 15:40:07 2006</envelope-from-line><from personal="Tian, Kevin" address="kevin.tian@intel.com">"Tian, Kevin" &lt;kevin.tian@intel.com&gt;</from><to personal="Tristan Gingold" address="Tristan.Gingold@bull.net">Tristan Gingold &lt;Tristan.Gingold@bull.net&gt;</to><subject normal="[Xen-ia64-devel] Virtual mem map">RE: [Xen-ia64-devel] Virtual mem map</subject><return-path>xen-ia64-devel-bounces@lists.xensource.com</return-path><envelope-to>www-data@lists.xensource.com</envelope-to><delivery-date>Mon, 09 Jan 2006 15:40:07 +0000</delivery-date><received>from localhost ([127.0.0.1] helo=lists.xensource.com)
	by host-192-168-0-1-bcn-london with esmtp (Exim 4.50)
	id 1Evz7v-0007WX-GE; Mon, 09 Jan 2006 15:40:07 +0000</received><received>from [192.168.0.10] (helo=lists.xensource.com)
	by host-192-168-0-1-bcn-london with esmtp (Exim 4.50)
	id 1Evz7t-0007WS-Ew
	for xen-ia64-devel@lists.xensource.com; Mon, 09 Jan 2006 15:40:05 +0000</received><received>from fmr20.intel.com ([134.134.136.19] helo=orsfmr005.jf.intel.com)
	by 192.168.0.10 with esmtp (Exim 4.50) id 1EvyvL-0007mM-Io
	for xen-ia64-devel@lists.xensource.com; Mon, 09 Jan 2006 15:27:08 +0000</received><received>from orsfmr100.jf.intel.com (orsfmr100.jf.intel.com [10.7.209.16])
	by orsfmr005.jf.intel.com (8.12.10/8.12.10/d: major-outer.mc,v 1.1
	2004/09/17 17:50:56 root Exp $) with ESMTP id k09FXdlU001942; 
	Mon, 9 Jan 2006 15:33:39 GMT</received><received>from pdsmsxvs01.pd.intel.com (pdsmsxvs01.pd.intel.com
	[172.16.12.122])
	by orsfmr100.jf.intel.com (8.12.10/8.12.10/d: major-inner.mc,v 1.2
	2004/09/17 18:05:01 root Exp $) with SMTP id k09FXcpm017185; 
	Mon, 9 Jan 2006 15:33:39 GMT</received><received>from pdsmsx331.ccr.corp.intel.com ([172.16.12.58])
	by pdsmsxvs01.pd.intel.com (SAVSMTP 3.1.7.47) with SMTP id
	M2006010923333515887 ; Mon, 09 Jan 2006 23:33:35 +0800</received><received>from pdsmsx403.ccr.corp.intel.com ([172.16.12.55]) by
	pdsmsx331.ccr.corp.intel.com with Microsoft SMTPSVC(6.0.3790.211); 
	Mon, 9 Jan 2006 23:33:35 +0800</received><x-mimeole>Produced By Microsoft Exchange V6.5.7226.0</x-mimeole><content-class>urn:content-classes:message</content-class><mime-version>1.0</mime-version><content-type>text/plain;
	charset="gb2312"</content-type><content-transfer-encoding>quoted-printable</content-transfer-encoding><date>Mon, 9 Jan 2006 23:33:34 +0800</date><message-id>571ACEFD467F7749BC50E0A98C17CDD802C06C1E@pdsmsx403</message-id><x-ms-has-attach/><x-ms-tnef-correlator/><thread-topic>[Xen-ia64-devel] Virtual mem map</thread-topic><thread-index>AcYVHvPT9C65XKT9Qc2CLozHhSzw4QAEak7g</thread-index><x-originalarrivaltime>09 Jan 2006 15:33:35.0421 (UTC)
	FILETIME=[0E022ED0:01C61532]</x-originalarrivaltime><x-scanned-by>MIMEDefang 2.52 on 10.7.209.16</x-scanned-by><x-sa-exim-connect-ip>134.134.136.19</x-sa-exim-connect-ip><x-sa-exim-mail-from>kevin.tian@intel.com</x-sa-exim-mail-from><x-spam-checker-version>SpamAssassin 3.1.0 (2005-09-13) on 192.168.0.10</x-spam-checker-version><x-spam-level/><x-spam-status>No, score=-2.0 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.1.0</x-spam-status><x-sa-exim-version>4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)</x-sa-exim-version><x-sa-exim-scanned>Yes (on 192.168.0.10)</x-sa-exim-scanned><x-beenthere>xen-ia64-devel@lists.xensource.com</x-beenthere><x-mailman-version>2.1.5</x-mailman-version><precedence>list</precedence><list-id>Discussion of the ia64 port of Xen
	&lt;xen-ia64-devel.lists.xensource.com&gt;</list-id><list-unsubscribe>&lt;http://lists.xensource.com/cgi-bin/mailman/listinfo/xen-ia64-devel&gt;,
	&lt;mailto:xen-ia64-devel-request@lists.xensource.com?subject=unsubscribe&gt;</list-unsubscribe><list-post>&lt;mailto:xen-ia64-devel@lists.xensource.com&gt;</list-post><list-help>&lt;mailto:xen-ia64-devel-request@lists.xensource.com?subject=help&gt;</list-help><list-subscribe>&lt;http://lists.xensource.com/cgi-bin/mailman/listinfo/xen-ia64-devel&gt;,
	&lt;mailto:xen-ia64-devel-request@lists.xensource.com?subject=subscribe&gt;</list-subscribe><sender>xen-ia64-devel-bounces@lists.xensource.com</sender><errors-to>xen-ia64-devel-bounces@lists.xensource.com</errors-to></headers><normalized-references><normalized-message-id>571ACEFD467F7749BC50E0A98C17CDD802C06C1E@pdsmsx403</normalized-message-id><normalized-thread-index>AcYVHvPT9C65XKT9Qc2CLozHhSzw4Q</normalized-thread-index></normalized-references><body type="text/plain;&#13;&#10;&#9;charset=&quot;gb2312&quot;"><para depth="0">From: Tristan Gingold [mailto:<email>Tristan.Gingold@bull.net</email>]
</para><quote depth="1"><quotepara depth="1">Sent: 2006年1月9日 22:18

</quotepara><quotepara depth="1">Remember we need to have:
* a page entry for every physical page
* a quick access to such entry.
The non-virtual mem map is very good for both points, but it can spare a lot
of memory.  I think my approach is better for memory usage but only slightly
slower.

</quotepara></quote><para depth="0">All by far are talking about pfn_to_page. Another thing you need to think is the<br/>reverse search. Giving a page struct, how do you derive its page frame number<br/>(page_to_pfn)? Bother virtually mapped memmap and physical memmap preserves a<br/>good feature that memory layout is linearly kept in either virtual or physical<br/>level, thus a simple minus calculation is enough. In your proposal, you may walk<br/>your offset table to find that index but low efficiency. Or at least you need to<br/>hack some bits within frame table entry to record index in offset table.

</para><para depth="0">Thanks,
Kevin

</para><footer type="list-management" depth="0">_______________________________________________
Xen-ia64-devel mailing list
<email>Xen-ia64-devel@lists.xensource.com</email>
<url>http://lists.xensource.com/xen-ia64-devel</url>

</footer></body></message>