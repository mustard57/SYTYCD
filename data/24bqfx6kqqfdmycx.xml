<message message-id="20091208201826.GC9995@redhat.com" list="com.redhat.libvir-list" id="24bqfx6kqqfdmycx" type="general" date="2009-12-08T12:18:07.801936-08:00" year="2009-01-01" year-month="2009-12-01" year-month-day="2009-12-08" thread-id="qjija454appkrcvc"><headers><envelope-from-line>Tue Dec 08 12:18:30 2009</envelope-from-line><from personal="Daniel P. Berrange" address="berrange@redhat.com">"Daniel P. Berrange" &lt;berrange@redhat.com&gt;</from><to personal="Jim Fehlig" address="jfehlig@novell.com">Jim Fehlig &lt;jfehlig@novell.com&gt;</to><cc personal="libVir" address="libvir-list@redhat.com">libVir &lt;libvir-list@redhat.com&gt;</cc><subject normal="[libvirt] [PATCH] Plumb domain description tag in xend backend">Re: [libvirt] [PATCH] Plumb domain description tag in xend backend</subject><received>from srv-117d-be06.markmail.marklogic.com ([172.19.8.66])
          by mail-1.a.markmail.int (JAMES SMTP Server 2.3.1) with SMTP ID 475
          for &lt;roderick.lewis.landry@a.markmail.org&gt;;
          Tue, 8 Dec 2009 12:18:30 -0800 (GMT-08:00)</received><received>from hormel.redhat.com (slb-117n.markmail.marklogic.com [172.19.8.33])
	by mgw-2.public.markmail.int (Postfix) with ESMTP id 217733B300CB
	for &lt;roderick.lewis.landry@a.markmail.org&gt;; Tue,  8 Dec 2009 12:18:07 -0800 (PST)</received><received>from listman.util.phx.redhat.com (listman.util.phx.redhat.com [10.8.4.110])
	by hormel.redhat.com (Postfix) with ESMTP id 9C254618C43;
	Tue,  8 Dec 2009 15:18:29 -0500 (EST)</received><received>from int-mx01.intmail.prod.int.phx2.redhat.com
	(nat-pool.util.phx.redhat.com [10.8.5.200])
	by listman.util.phx.redhat.com (8.13.1/8.13.1) with ESMTP id
	nB8KIRFp026526 for &lt;libvir-list@listman.util.phx.redhat.com&gt;;
	Tue, 8 Dec 2009 15:18:27 -0500</received><received>from file.fab.redhat.com (file.fab.redhat.com [10.33.63.6])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id nB8KIQDP031273
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO);
	Tue, 8 Dec 2009 15:18:27 -0500</received><received>from file.fab.redhat.com (localhost.localdomain [127.0.0.1])
	by file.fab.redhat.com (8.13.1/8.13.1) with ESMTP id nB8KIQOH012401;
	Tue, 8 Dec 2009 20:18:26 GMT</received><received>(from berrange@localhost)
	by file.fab.redhat.com (8.13.1/8.13.1/Submit) id nB8KIQqi012397;
	Tue, 8 Dec 2009 20:18:26 GMT</received><date>Tue, 8 Dec 2009 20:18:26 +0000</date><message-id>20091208201826.GC9995@redhat.com</message-id><references>&lt;4B1EA542.9090100@novell.com&gt;</references><mime-version>1.0</mime-version><content-type>text/plain; charset=us-ascii</content-type><content-disposition>inline</content-disposition><in-reply-to>&lt;4B1EA542.9090100@novell.com&gt;</in-reply-to><user-agent>Mutt/1.4.1i</user-agent><x-scanned-by>MIMEDefang 2.67 on 10.5.11.11</x-scanned-by><x-loop>libvir-list@redhat.com</x-loop><x-beenthere>libvir-list@redhat.com</x-beenthere><x-mailman-version>2.1.5</x-mailman-version><precedence>junk</precedence><reply-to>"Daniel P. Berrange" &lt;berrange@redhat.com&gt;</reply-to><list-id>This list is about the libvirt library &lt;libvir-list.redhat.com&gt;</list-id><list-unsubscribe>&lt;https://www.redhat.com/mailman/listinfo/libvir-list&gt;,
	&lt;mailto:libvir-list-request@redhat.com?subject=unsubscribe&gt;</list-unsubscribe><list-archive>&lt;https://www.redhat.com/archives/libvir-list&gt;</list-archive><list-post>&lt;mailto:libvir-list@redhat.com&gt;</list-post><list-help>&lt;mailto:libvir-list-request@redhat.com?subject=help&gt;</list-help><list-subscribe>&lt;https://www.redhat.com/mailman/listinfo/libvir-list&gt;,
	&lt;mailto:libvir-list-request@redhat.com?subject=subscribe&gt;</list-subscribe><sender>libvir-list-bounces@redhat.com</sender><errors-to>libvir-list-bounces@redhat.com</errors-to></headers><normalized-references><normalized-message-id>20091208201826.GC9995@redhat.com</normalized-message-id><normalized-in-reply-to>4B1EA542.9090100@novell.com</normalized-in-reply-to><normalized-reference>4B1EA542.9090100@novell.com</normalized-reference></normalized-references><body type="text/plain; charset=us-ascii"><para depth="0">On Tue, Dec 08, 2009 at 12:13:06PM -0700, Jim Fehlig wrote:
</para><quote depth="1"><quotepara depth="1">I sent this patch yesterday evening using git send-email on a test
machine which did not have my .gitconfig, so the headers seem quite
jacked.  Resending ...

</quotepara><quotepara depth="1">/me still learning git :-/

</quotepara><quotepara depth="1">Regards,
Jim

</quotepara><quotepara depth="1">From acba9b620128c4dcdbb95a1ea06604f3013a0518 Mon Sep 17 00:00:00 2001
From: Jim Fehlig &lt;<email>jfehlig@novell.com</email>&gt;
Date: Mon, 7 Dec 2009 14:24:21 -0700
Subject: [PATCH] Plumb domain description tag in xend backend

</quotepara><quotepara depth="1">xen-unstable changesets 20321 and 20521 added support for
description in xend domain config.  This patch extends that
support in xend backend.
</quotepara><quotepara depth="1">---
 src/xen/xend_internal.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

</quotepara><quotepara depth="1">Index: libvirt-0.7.4/src/xen/xend_internal.c
===================================================================
--- libvirt-0.7.4.orig/src/xen/xend_internal.c
+++ libvirt-0.7.4/src/xen/xend_internal.c
@@ -2360,6 +2360,9 @@ xenDaemonParseSxpr(virConnectPtr conn,
     }
     virUUIDParse(tmp, def-&gt;uuid);

</quotepara><quotepara depth="1">+    if (sexpr_node_copy(root, "domain/description", &amp;def-&gt;description) &lt; 0)
+        goto no_memory;
+
     hvm = sexpr_lookup(root, "domain/image/hvm") ? 1 : 0;
     if (!hvm) {
         if (sexpr_node_copy(root, "domain/bootloader",
@@ -5676,6 +5679,9 @@ xenDaemonFormatSxpr(virConnectPtr conn,
     virUUIDFormat(def-&gt;uuid, uuidstr);
     virBufferVSprintf(&amp;buf, "(uuid '%s')", uuidstr);

</quotepara><quotepara depth="1">+    if (def-&gt;description)
+        virBufferVSprintf(&amp;buf, "(description '%s')", def-&gt;description);
+
     if (def-&gt;os.bootloader) {
         if (def-&gt;os.bootloader[0])
             virBufferVSprintf(&amp;buf, "(bootloader '%s')", def-&gt;os.bootloader);
</quotepara></quote><para depth="0">
ACK, didn't know Xen had grown a 'description' field :-)

</para><para depth="0">Daniel
</para><footer type="signature" depth="0" hash="5302459494466749605">-- 
|: Red Hat, Engineering, London   -o-   <url>http://people.redhat.com/berrange/</url> :|
|: <url>http://libvirt.org</url>  -o-  <url>http://virt-manager.org</url>  -o-  <url>http://ovirt.org</url> :|
|: <url>http://autobuild.org</url>       -o-         <url>http://search.cpan.org/~danberr/</url> :|
|: GnuPG: 7D3B9505  -o-  F3C9 553F A1DA 4AC2 5648 23C1 B3DF F742 7D3B 9505 :|

</footer><footer type="list-management" depth="0">--
Libvir-list mailing list
<email>Libvir-list@redhat.com</email>
<url>https://www.redhat.com/mailman/listinfo/libvir-list</url>
</footer></body></message>