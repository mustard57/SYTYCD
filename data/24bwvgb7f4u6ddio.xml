<message message-id="1267572541-410-13-git-send-email-gregkh@suse.de" list="org.kernel.vger.linux-kernel" id="24bwvgb7f4u6ddio" type="development" date="2010-03-02T15:28:12-08:00" year="2010-01-01" year-month="2010-03-01" year-month-day="2010-03-02" thread-id="xv2dwggy74m5he7q"><headers><envelope-from-line>Tue Mar 02 15:58:39 2010</envelope-from-line><from personal="Greg Kroah-Hartman" address="gregkh@suse.de">Greg Kroah-Hartman &lt;gregkh@suse.de&gt;</from><to personal="linux-kernel@vger.kernel.org" address="linux-kernel@vger.kernel.org">linux-kernel@vger.kernel.org</to><cc personal="Andi Kleen" address="andi@firstfloor.org">Andi Kleen &lt;andi@firstfloor.org&gt;</cc><subject normal="[PATCH 13/62] sysdev: Fix type of sysdev class attribute in memory driver">[PATCH 13/62] sysdev: Fix type of sysdev class attribute in memory driver</subject><received>from srv-117c-be06.markmail.marklogic.com ([172.19.8.46])
          by mail-1.a.markmail.int (JAMES SMTP Server 2.3.1) with SMTP ID 102
          for &lt;archive.user.1834@a.markmail.org&gt;;
          Tue, 2 Mar 2010 15:58:39 -0800 (GMT-08:00)</received><received>from vger.kernel.org (slb-117n.markmail.marklogic.com [172.19.8.33])
	by mgw-1.public.markmail.int (Postfix) with ESMTP id 3662D2908470
	for &lt;archive.user.1834@a.markmail.org&gt;; Tue,  2 Mar 2010 15:58:16 -0800 (PST)</received><received>(majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1758114Ab0CBX6X (ORCPT
	&lt;rfc822;archive.user.1834@a.markmail.org&gt;);
	Tue, 2 Mar 2010 18:58:23 -0500</received><received>from kroah.org ([198.145.64.141]:38518 "EHLO coco.kroah.org"
	rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
	id S1754165Ab0CBX3Q (ORCPT &lt;rfc822;linux-kernel@vger.kernel.org&gt;);
	Tue, 2 Mar 2010 18:29:16 -0500</received><received>from localhost (c-98-246-45-209.hsd1.or.comcast.net [98.246.45.209])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by coco.kroah.org (Postfix) with ESMTPSA id 93A2548A2B;
	Tue,  2 Mar 2010 15:29:16 -0800 (PST)</received><date>Tue,  2 Mar 2010 15:28:12 -0800</date><message-id>1267572541-410-13-git-send-email-gregkh@suse.de</message-id><x-mailer>git-send-email 1.7.0.1</x-mailer><in-reply-to>&lt;20100302230933.GA32287@kroah.com&gt;</in-reply-to><references>&lt;20100302230933.GA32287@kroah.com&gt;</references><sender>linux-kernel-owner@vger.kernel.org</sender><precedence>bulk</precedence><list-id>&lt;linux-kernel.vger.kernel.org&gt;</list-id><x-mailing-list>linux-kernel@vger.kernel.org</x-mailing-list></headers><normalized-references><normalized-message-id>1267572541-410-13-git-send-email-gregkh@suse.de</normalized-message-id><normalized-in-reply-to>20100302230933.GA32287@kroah.com</normalized-in-reply-to><normalized-reference>20100302230933.GA32287@kroah.com</normalized-reference></normalized-references><body type="text/plain"><para depth="0">From: Andi Kleen &lt;<email>andi@firstfloor.org</email>&gt;

</para><para depth="0">This attribute is really a sysdev_class attribute, not a plain class attribute.

</para><para depth="0">They are identical in layout currently, but this might not always be
the case.

</para><para depth="0">Signed-off-by: Andi Kleen &lt;<email>ak@linux.intel.com</email>&gt;
Signed-off-by: Greg Kroah-Hartman &lt;<email>gregkh@suse.de</email>&gt;
</para><para depth="0">---
 drivers/base/memory.c |    7 ++++---
 1 files changed, 4 insertions(+), 3 deletions(-)

</para><para depth="0">diff --git a/drivers/base/memory.c b/drivers/base/memory.c
index bd02505..563656a 100644
--- a/drivers/base/memory.c
+++ b/drivers/base/memory.c
@@ -309,17 +309,18 @@ static SYSDEV_ATTR(removable, 0444, show_mem_removable,<br/>NULL);
  * Block size attribute stuff
  */
 static ssize_t
-print_block_size(struct class *class, char *buf)
+print_block_size(struct sysdev_class *class, struct sysdev_class_attribute<br/>*attr,
+		 char *buf)
 {
 	return sprintf(buf, "%#lx\n", (unsigned long)PAGES_PER_SECTION * PAGE_SIZE);
 }

</para><para depth="0">-static CLASS_ATTR(block_size_bytes, 0444, print_block_size, NULL);
+static SYSDEV_CLASS_ATTR(block_size_bytes, 0444, print_block_size, NULL);

</para><para depth="0"> static int block_size_init(void)
 {
 	return sysfs_create_file(&amp;memory_sysdev_class.kset.kobj,
-				&amp;class_attr_block_size_bytes.attr);
+				&amp;attr_block_size_bytes.attr);
 }

</para><footer type="noise" depth="0"> /*
</footer><footer type="signature" depth="0" hash="5011828800519500140">-- 
1.7.0.1

</footer><footer type="list-management" depth="0">--
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to <email>majordomo@vger.kernel.org</email>
More majordomo info at  <url>http://vger.kernel.org/majordomo-info.html</url>
Please read the FAQ at  <url>http://www.tux.org/lkml/</url>
</footer></body></message>