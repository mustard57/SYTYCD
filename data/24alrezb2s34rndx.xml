<message message-id="AANLkTimP2Wre8j72IENVrI9QHMDkkNbpdqcJL3eC_bWG@mail.gmail.com" list="net.java.openjdk.hotspot-runtime-dev" id="24alrezb2s34rndx" type="development" date="2010-06-23T22:03:56+03:00" year="2010-01-01" year-month="2010-06-01" year-month-day="2010-06-23" thread-id="24alrezb2s34rndx"><headers><envelope-from-line>Mon Jun 28 09:13:13 2010</envelope-from-line><from personal="Dan Cojocar" address="dan.cojocar@gmail.com">Dan Cojocar &lt;dan.cojocar@gmail.com&gt;</from><to personal="hotspot-runtime-dev@openjdk.java.net" address="hotspot-runtime-dev@openjdk.java.net">hotspot-runtime-dev@openjdk.java.net</to><subject normal="Socket read segmentation fault">Socket read segmentation fault</subject><received>from srv-117d-be06.markmail.marklogic.com ([172.19.8.66])
          by mail-1.a.markmail.int (JAMES SMTP Server 2.3.1) with SMTP ID 622
          for &lt;jerome.hill.johnson@a.markmail.org&gt;;
          Mon, 28 Jun 2010 09:13:13 -0800 (GMT-08:00)</received><received>from sca-git1.sun.com (slb-117n.markmail.marklogic.com [172.19.8.33])
	by mgw-2.public.markmail.int (Postfix) with ESMTP id 263FD3B300C3
	for &lt;jerome.hill.johnson@a.markmail.org&gt;; Mon, 28 Jun 2010 10:12:50 -0700 (PDT)</received><received>from mail.openjdk.java.net (mail.openjdk.java.net [192.9.170.174])
	by sca-git1.sun.com (8.13.8+Sun/8.13.8) with ESMTP id o5SHDCLE018499;
	Mon, 28 Jun 2010 10:13:12 -0700 (PDT)</received><received>from openjdk-mail.foundry.sun.com (opensolaris [127.0.0.1])
	by mail.openjdk.java.net (Postfix) with ESMTP id 76F9265A0;
	Mon, 28 Jun 2010 10:12:51 -0700 (PDT)</received><x-original-to>hotspot-runtime-dev@openjdk.java.net</x-original-to><delivered-to>hotspot-runtime-dev@openjdk.java.net</delivered-to><received>from mail-wy0-f182.google.com (mail-wy0-f182.google.com
	[74.125.82.182])
	by mail.openjdk.java.net (Postfix) with ESMTP id 4FAAE65D6
	for &lt;hotspot-runtime-dev@openjdk.java.net&gt;;
	Wed, 23 Jun 2010 12:03:58 -0700 (PDT)</received><received>by wyb33 with SMTP id 33so5629114wyb.13
	for &lt;hotspot-runtime-dev@openjdk.java.net&gt;;
	Wed, 23 Jun 2010 12:03:57 -0700 (PDT)</received><mime-version>1.0</mime-version><received>by 10.227.135.10 with SMTP id l10mr7912769wbt.64.1277319836991; Wed, 
	23 Jun 2010 12:03:56 -0700 (PDT)</received><received>by 10.216.185.70 with HTTP; Wed, 23 Jun 2010 12:03:56 -0700 (PDT)</received><date>Wed, 23 Jun 2010 22:03:56 +0300</date><message-id>AANLkTimP2Wre8j72IENVrI9QHMDkkNbpdqcJL3eC_bWG@mail.gmail.com</message-id><content-type>multipart/alternative; boundary=0016e64c3db02608990489b7333d</content-type><x-mailman-approved-at>Mon, 28 Jun 2010 10:12:51 -0700</x-mailman-approved-at><x-beenthere>hotspot-runtime-dev@openjdk.java.net</x-beenthere><x-mailman-version>2.1.9</x-mailman-version><precedence>list</precedence><list-id>Technical discussion about the development of the HotSpot runtime
	subsystem &lt;hotspot-runtime-dev.openjdk.java.net&gt;</list-id><list-unsubscribe>&lt;http://mail.openjdk.java.net/mailman/listinfo/hotspot-runtime-dev&gt;,
	&lt;mailto:hotspot-runtime-dev-request@openjdk.java.net?subject=unsubscribe&gt;</list-unsubscribe><list-archive>&lt;http://mail.openjdk.java.net/pipermail/hotspot-runtime-dev&gt;</list-archive><list-post>&lt;mailto:hotspot-runtime-dev@openjdk.java.net&gt;</list-post><list-help>&lt;mailto:hotspot-runtime-dev-request@openjdk.java.net?subject=help&gt;</list-help><list-subscribe>&lt;http://mail.openjdk.java.net/mailman/listinfo/hotspot-runtime-dev&gt;,
	&lt;mailto:hotspot-runtime-dev-request@openjdk.java.net?subject=subscribe&gt;</list-subscribe><sender>hotspot-runtime-dev-bounces@openjdk.java.net</sender><errors-to>hotspot-runtime-dev-bounces@openjdk.java.net</errors-to></headers><normalized-references><normalized-message-id>AANLkTimP2Wre8j72IENVrI9QHMDkkNbpdqcJL3eC_bWG@mail.gmail.com</normalized-message-id></normalized-references><body multipart="multipart/alternative; boundary=0016e64c3db02608990489b7333d" type="text/plain; charset=ISO-8859-1"><greeting depth="0">Hello all,
</greeting><para depth="0">I repost the backtraces on this list too, in hope that someone will guide me
to debug this problem further.
Regards,
Dan

</para><footer type="signature" depth="0" hash="7449155605579089387">On Tue, Jun 22, 2010 at 11:02 AM, Dan Cojocar &lt;<email>dan.cojocar@gmail.com</email>&gt; wrote:

</footer><quote depth="1"><quotepara depth="1">Hello,
I'm running resin app server to process jms messages from an activemq queue
and for last couple of days the jvm keeps crashing. I'm using CentOS release
5.4 (Final) and in dmesg logs I get something like:
 java[16538]: segfault at 0000000044d45ff8 rip 00002aab1b8964f8 rsp
0000000044d46000 error 6
I get the segfault also running with: jdk1.6.0_16 or jdk1.6.0_20.
Compiled openjdk-7-ea-src-b98-17_jun_2010 with debug and using gdb I see
the following backtraces:

</quotepara><quotepara depth="1">1. Core was generated by `/home/dcojocar/jdk/build/-debug/bin/java
-Dresin.watchdog=16600 -Djava.util.log'.
Program terminated with signal 11, Segmentation fault.
#0  0x00002b56ca667f40 in markOopDesc::value (this=Cannot access memory at
address 0x442daff8
) at /home/dcojocar/jdk/openjdk/hotspot/src/share/vm/oops/markOop.hpp:102
102       uintptr_t value() const { return (uintptr_t) this; }
(gdb) bt
#0  0x00002b56ca667f40 in markOopDesc::value (this=Cannot access memory at
address 0x442daff8
) at /home/dcojocar/jdk/openjdk/hotspot/src/share/vm/oops/markOop.hpp:102
#1  0x00002b56ca676c89 in markOopDesc::hash (this=0x3867ac1901) at
/home/dcojocar/jdk/openjdk/hotspot/src/share/vm/oops/markOop.hpp:346
#2  0x00002b56ca676cb1 in markOopDesc::has_no_hash (this=0x3867ac1901) at
/home/dcojocar/jdk/openjdk/hotspot/src/share/vm/oops/markOop.hpp:350
#3  0x00002b56ca84b3aa in oopDesc::identity_hash (this=0x9ad9fbf0) at
/home/dcojocar/jdk/openjdk/hotspot/src/share/vm/oops/oop.inline.hpp:662
#4  0x00002b56ca982414 in jfieldIDWorkaround::klass_hash_ok (k=0x9ad9fbf0,
id=0x70cf583233) at
/home/dcojocar/jdk/openjdk/hotspot/src/share/vm/prims/jni.cpp:167
#5  0x00002b56ca982506 in jfieldIDWorkaround::verify_instance_jfieldID
(k=0x9ad9fbf0, id=0x70cf583233) at
/home/dcojocar/jdk/openjdk/hotspot/src/share/vm/prims/jni.cpp:180
#6  0x00002b56ca988913 in jfieldIDWorkaround::from_instance_jfieldID
(k=0x9ad9fbf0, id=0x70cf583233) at
/home/dcojocar/jdk/openjdk/hotspot/src/share/vm/runtime/jfieldIDWorkaround.hpp:130
#7  0x00002b56ca985249 in jni_GetIntField (env=0x145fb9e8, obj=0x442eb270,
fieldID=0x70cf583233) at
/home/dcojocar/jdk/openjdk/hotspot/src/share/vm/prims/jni.cpp:1703
#8  0x00002aaab282bc52 in Java_java_net_SocketInputStream_socketRead0
(env=0x145fb9e8, this=0x442eb268, fdObj=0x442eb270, data=0x442eb278, off=0,
len=4, timeout=0)
    at ../../../src/solaris/native/java/net/SocketInputStream.c:75
#9  0x00002aaaab599a27 in ?? ()
#10 0x0000000000000000 in ?? ()

</quotepara><quotepara depth="1">2. Core was generated by `/home/dcojocar/jdk/build/-debug/bin/java
-Dresin.watchdog=16600 -Djava.util.log'.
Program terminated with signal 11, Segmentation fault.
#0  0x00002b80d0a8d366 in StackObj::StackObj (this=0x42b02180) at
/home/dcojocar/jdk/openjdk/hotspot/src/share/vm/memory/allocation.hpp:97
97      class StackObj ALLOCATION_SUPER_CLASS_SPEC {
(gdb) bt
#0  0x00002b80d0a8d366 in StackObj::StackObj (this=0x42b02180) at
/home/dcojocar/jdk/openjdk/hotspot/src/share/vm/memory/allocation.hpp:97
#1  0x00002b80d0eacd3e in JNITraceWrapper::JNITraceWrapper
(this=0x42b02180, format=0x2b80d1327434 "GetIntField") at
/home/dcojocar/jdk/openjdk/hotspot/src/share/vm/prims/jni.cpp:214
#2  0x00002b80d0eaa218 in jni_GetIntField (env=0x194729e8, obj=0x42b12240,
fieldID=0x70cf583233) at
/home/dcojocar/jdk/openjdk/hotspot/src/share/vm/prims/jni.cpp:1703
#3  0x00002aaaaf1a3c52 in Java_java_net_SocketInputStream_socketRead0
(env=0x194729e8, this=0x42b12238, fdObj=0x42b12240, data=0x42b12248, off=0,
len=111, timeout=0)
    at ../../../src/solaris/native/java/net/SocketInputStream.c:75
#4  0x00002aaaab5c9fa7 in ?? ()
#5  0x0000000000000000 in ?? ()

</quotepara><quotepara depth="1">Please advice what should I do next.
Regards,
Dan

</quotepara></quote></body></message>