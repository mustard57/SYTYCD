<message message-id="e8d26ac40906090833h257bf9f6h5f11847057d7a60c@mail.gmail.com" list="org.apache.couchdb.user" id="24b5iaomqjxblfro" type="users" date="2009-06-09T08:33:54-07:00" year="2009-01-01" year-month="2009-06-01" year-month-day="2009-06-09" thread-id="24b5iaomqjxblfro"><headers><envelope-from-line>Tue Jun 09 07:34:24 2009</envelope-from-line><from personal="Adam Wolff" address="awolff@gmail.com">Adam Wolff &lt;awolff@gmail.com&gt;</from><to personal="user@couchdb.apache.org" address="user@couchdb.apache.org">user@couchdb.apache.org</to><subject normal="document revisions">document revisions</subject><received>from srv-117d-be06.markmail.marklogic.com ([172.19.8.66])
          by mail-1.a.markmail.int (JAMES SMTP Server 2.3.1) with SMTP ID 420
          for &lt;clara.mcgee.sellers@a.markmail.org&gt;;
          Tue, 9 Jun 2009 07:34:24 -0800 (GMT-08:00)</received><received>from mail.apache.org (slb-117n.markmail.marklogic.com [172.19.8.33])
	by mgw-2.public.markmail.int (Postfix) with SMTP id 5957E3B300B9
	for &lt;clara.mcgee.sellers@a.markmail.org&gt;; Tue,  9 Jun 2009 08:34:01 -0700 (PDT)</received><received>(qmail 93634 invoked by uid 500); 9 Jun 2009 15:34:23 -0000</received><mailing-list>contact user-help@couchdb.apache.org; run by ezmlm</mailing-list><precedence>bulk</precedence><list-help>&lt;mailto:user-help@couchdb.apache.org&gt;</list-help><list-unsubscribe>&lt;mailto:user-unsubscribe@couchdb.apache.org&gt;</list-unsubscribe><list-post>&lt;mailto:user@couchdb.apache.org&gt;</list-post><list-id>&lt;user.couchdb.apache.org&gt;</list-id><reply-to>user@couchdb.apache.org</reply-to><delivered-to>mailing list user@couchdb.apache.org</delivered-to><received>(qmail 93624 invoked by uid 99); 9 Jun 2009 15:34:23 -0000</received><received>from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 15:34:23 +0000</received><x-asf-spam-status>No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS</x-asf-spam-status><x-spam-check-by>apache.org</x-spam-check-by><received-spf>pass (athena.apache.org: domain of awolff@gmail.com designates 74.125.92.26 as permitted sender)</received-spf><received>from [74.125.92.26] (HELO qw-out-2122.google.com) (74.125.92.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 15:34:15 +0000</received><received>by qw-out-2122.google.com with SMTP id 5so29709qwd.29
        for &lt;user@couchdb.apache.org&gt;; Tue, 09 Jun 2009 08:33:54 -0700 (PDT)</received><dkim-signature>v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=8Xp8REWqZrBnMdN1yVVuuLsRpma786VTqIAwkrGmOZ0=;
        b=hLvU9+OKGohp8vQHcU/tQtvofG8x1A8zkx1IWTL6EZJtgbFsoEQFcJt6oQdi80Q0G4
         yYfSaT2FGBxYdTsy6VeRPhe9h9o3k2ibna5HSnj+/eVnpwYxXfAgWQ+09yj7h4FIlYPI
         FPDHHuCAn7FfhlbtcdI/XsMIkI39E3BPR92KY=</dkim-signature><domainkey-signature>a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=rbMj85/FGA+P0ARsC3NbrbTiJP9smJgiybCclsOu7AHcgl8zHYpG+jpnr9g3IAQKEp
         d0RadFOfXeO16zFi7snW61XUh3g+fwP5FJFnfLriJRB+SqhjaIiW0RBMkGnhX8nPlebv
         05aT2T4CT0FkwOxVHEc/qngktfXDZ78Xn45Fk=</domainkey-signature><mime-version>1.0</mime-version><received>by 10.229.79.17 with SMTP id n17mr73472qck.82.1244561634668; Tue, 09 
	Jun 2009 08:33:54 -0700 (PDT)</received><date>Tue, 9 Jun 2009 08:33:54 -0700</date><message-id>e8d26ac40906090833h257bf9f6h5f11847057d7a60c@mail.gmail.com</message-id><content-type>multipart/alternative; boundary=0016364ee4a822c202046bec1623</content-type><x-virus-checked>Checked by ClamAV on apache.org</x-virus-checked></headers><normalized-references><normalized-message-id>e8d26ac40906090833h257bf9f6h5f11847057d7a60c@mail.gmail.com</normalized-message-id></normalized-references><body multipart="multipart/alternative; boundary=0016364ee4a822c202046bec1623" type="text/plain; charset=ISO-8859-1"><para depth="0">Hi everyone,Our app needs to preserve document revisions. I know that the
revision feature of couchdb is not intended for application-level document
revisions, but the semantics of couch's revisions are perfect for our app,
and I don't want to have to rebuild that feature. What's the best way to
take advantage of couch's built-in revisions? I know we can't rely on the
revisions being there, but they *are* there right after you write a new
version. After a successful write, the caller could be responsible for
putting a separate document for the old revision, right?

</para><para depth="0">Alternatively, is this a mod to couchdb that we should explore? A feature so
that you can say: for the documents in this database, preserve the revisions
even upon compaction.

</para><para depth="0">Thoughts? Thanks,
A
</para></body></message>