<message message-id="AANLkTinmVc3YaRek9Ey0C5T-wB-KvqHZrVDFU1W=QfaL@mail.gmail.com" list="org.apache.incubator.qpid-dev" id="24awuh37fkvuuzhx" type="development" date="2011-03-25T15:30:42+01:00" year="2011-01-01" year-month="2011-03-01" year-month-day="2011-03-25" thread-id="cd5hsfv2wjyu547v"><headers><envelope-from-line>Fri Mar 25 06:31:10 2011</envelope-from-line><from personal="Robert Godfrey" address="rob.j.godfrey@gmail.com">Robert Godfrey &lt;rob.j.godfrey@gmail.com&gt;</from><to personal="dev@qpid.apache.org" address="dev@qpid.apache.org">dev@qpid.apache.org</to><cc personal="jross@redhat.com" address="jross@redhat.com">jross@redhat.com</cc><subject normal="Qpid and AMQP 1-0: Plans?">Re: Qpid and AMQP 1-0: Plans?</subject><received>from srv-117d-be06.markmail.marklogic.com ([172.19.8.66])
          by mail-1.a.markmail.int (JAMES SMTP Server 2.3.1) with SMTP ID 437
          for &lt;linda.wilkerson.dillon@a.markmail.org&gt;;
          Fri, 25 Mar 2011 06:31:10 -0800 (GMT-08:00)</received><received>from mail.apache.org (slb-117n.markmail.marklogic.com [172.19.8.33])
	by mgw-2.public.markmail.int (Postfix) with SMTP id E6DD23B300B8
	for &lt;linda.wilkerson.dillon@a.markmail.org&gt;; Fri, 25 Mar 2011 07:30:46 -0700 (PDT)</received><received>(qmail 94195 invoked by uid 500); 25 Mar 2011 14:31:09 -0000</received><mailing-list>contact dev-help@qpid.apache.org; run by ezmlm</mailing-list><precedence>bulk</precedence><list-help>&lt;mailto:dev-help@qpid.apache.org&gt;</list-help><list-unsubscribe>&lt;mailto:dev-unsubscribe@qpid.apache.org&gt;</list-unsubscribe><list-post>&lt;mailto:dev@qpid.apache.org&gt;</list-post><list-id>&lt;dev.qpid.apache.org&gt;</list-id><reply-to>dev@qpid.apache.org</reply-to><delivered-to>mailing list dev@qpid.apache.org</delivered-to><received>(qmail 94187 invoked by uid 99); 25 Mar 2011 14:31:09 -0000</received><received>from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Mar 2011 14:31:09 +0000</received><x-asf-spam-status>No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL</x-asf-spam-status><x-spam-check-by>apache.org</x-spam-check-by><received-spf>pass (athena.apache.org: domain of rob.j.godfrey@gmail.com designates 209.85.210.170 as permitted sender)</received-spf><received>from [209.85.210.170] (HELO mail-iy0-f170.google.com) (209.85.210.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Mar 2011 14:31:03 +0000</received><received>by iyb12 with SMTP id 12so1400873iyb.15
        for &lt;dev@qpid.apache.org&gt;; Fri, 25 Mar 2011 07:30:43 -0700 (PDT)</received><dkim-signature>v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:cc:content-type;
        bh=kzqsUtBEkBKtkO6/WXKJ/M2VFoeoWKjyAbZpk1xi6g0=;
        b=ScAqJL9O2cgM37MIpbmGg0IqhMktr0txoYSIqTcAlre8aSjkIrKOYDN45oi6QiHiNK
         802G1CScPxiA+lFPKjfMzi4MzTRJBJpz2ud6Pty0l/isJqdG4QTYtKeY5uaV6/15YwcP
         O7cLEAAzFWGc+Y6qBLxghsNlWGWc54kLR+kNo=</dkim-signature><domainkey-signature>a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type;
        b=AdBuEYatNKT+byDZl3oxS+iEeiQnfn29J/Ol6UUen+XDxIHR9vEY2pTKLqXFHjgvTR
         8VKUaPOr5DjTSmCbZ1pFqW+LDacRwUd3Q8xMVDqxUT9LdvlPeI98S9hQ5+icDLRkg5mz
         nMTyS7MODKtF+jM0bVo67L0LUu6las8hGQJYE=</domainkey-signature><mime-version>1.0</mime-version><received>by 10.42.51.81 with SMTP id d17mr1272529icg.282.1301063442927; Fri,
 25 Mar 2011 07:30:42 -0700 (PDT)</received><received>by 10.42.223.133 with HTTP; Fri, 25 Mar 2011 07:30:42 -0700 (PDT)</received><in-reply-to>&lt;alpine.LFD.2.02.1103250937001.2382@localhost.localdomain&gt;</in-reply-to><references>&lt;AANLkTimvFciRCoG6-UjN+hdwi4YbjgXGJD064B5HjLOe@mail.gmail.com&gt;
	&lt;4D8B4B8B.6050708@redhat.com&gt;
	&lt;AANLkTikJpnzoBewt7hFJ6+uzCXjtaXvzykn2owpAtmA4@mail.gmail.com&gt;
	&lt;4D8B5106.8090805@redhat.com&gt;
	&lt;AANLkTim-G0m393QpeHsErPRzaE-2eMUxAwBt_mmzuCbq@mail.gmail.com&gt;
	&lt;4D8B5669.3080902@redhat.com&gt;
	&lt;AANLkTiktC64BrLQLQJR6fnimhvEEhgN7Y1tW-Mgh6Ch3@mail.gmail.com&gt;
	&lt;4D8B5B9D.4010207@redhat.com&gt;
	&lt;AANLkTi=dam_Gaz+=Xq2oL6jb3SwqJWRXAb_HbmjLuwtj@mail.gmail.com&gt;
	&lt;1300982105.3642.4.camel@daffodil&gt;
	&lt;4D8B7536.2020204@redhat.com&gt;
	&lt;CC94D05E-3BFD-4B69-B5F2-A860DEDFE4E4@gmail.com&gt;
	&lt;AANLkTikCOf73__WCA3EoZvErYq3K-OAZLE=CQwjwTMVt@mail.gmail.com&gt;
	&lt;alpine.LFD.2.02.1103250937001.2382@localhost.localdomain&gt;</references><date>Fri, 25 Mar 2011 15:30:42 +0100</date><message-id>AANLkTinmVc3YaRek9Ey0C5T-wB-KvqHZrVDFU1W=QfaL@mail.gmail.com</message-id><content-type>multipart/alternative; boundary=20cf30223f8358933c049f4f70fb</content-type></headers><normalized-references><normalized-message-id>AANLkTinmVc3YaRek9Ey0C5T-wB-KvqHZrVDFU1W=QfaL@mail.gmail.com</normalized-message-id><normalized-in-reply-to>alpine.LFD.2.02.1103250937001.2382@localhost.localdomain</normalized-in-reply-to><normalized-reference>AANLkTimvFciRCoG6-UjN+hdwi4YbjgXGJD064B5HjLOe@mail.gmail.com</normalized-reference><normalized-reference>4D8B4B8B.6050708@redhat.com</normalized-reference><normalized-reference>AANLkTikJpnzoBewt7hFJ6+uzCXjtaXvzykn2owpAtmA4@mail.gmail.com</normalized-reference><normalized-reference>4D8B5106.8090805@redhat.com</normalized-reference><normalized-reference>AANLkTim-G0m393QpeHsErPRzaE-2eMUxAwBt_mmzuCbq@mail.gmail.com</normalized-reference><normalized-reference>4D8B5669.3080902@redhat.com</normalized-reference><normalized-reference>AANLkTiktC64BrLQLQJR6fnimhvEEhgN7Y1tW-Mgh6Ch3@mail.gmail.com</normalized-reference><normalized-reference>4D8B5B9D.4010207@redhat.com</normalized-reference><normalized-reference>AANLkTi=dam_Gaz+=Xq2oL6jb3SwqJWRXAb_HbmjLuwtj@mail.gmail.com</normalized-reference><normalized-reference>1300982105.3642.4.camel@daffodil</normalized-reference><normalized-reference>4D8B7536.2020204@redhat.com</normalized-reference><normalized-reference>CC94D05E-3BFD-4B69-B5F2-A860DEDFE4E4@gmail.com</normalized-reference><normalized-reference>AANLkTikCOf73__WCA3EoZvErYq3K-OAZLE=CQwjwTMVt@mail.gmail.com</normalized-reference><normalized-reference>alpine.LFD.2.02.1103250937001.2382@localhost.localdomain</normalized-reference></normalized-references><body multipart="multipart/alternative; boundary=20cf30223f8358933c049f4f70fb" type="text/plain; charset=ISO-8859-1"><para depth="0">On 25 March 2011 15:04, &lt;<email>jross@redhat.com</email>&gt; wrote:

</para><quote depth="1"><quotepara depth="1">On Fri, 25 Mar 2011, Robert Godfrey wrote:

</quotepara><quotepara depth="1"> We could insert a sub-project at the top level while still maintaining the
</quotepara><quote depth="2"><quote depth="3"><quotepara depth="3">existing structure? For example:

</quotepara><quotepara depth="3">.../asf/qpid/trunk/qpid/spec
.../asf/qpid/trunk/qpid/cpp
.../asf/qpid/trunk/qpid/java
.../asf/qpid/trunk/qpid/...

</quotepara><quotepara depth="3">.../asf/qpid/qpid-amqp/trunk/common
.../asf/qpid/qpid-amqp/trunk/cpp
.../asf/qpid/qpid-amqp/trunk/java
.../asf/qpid/qpid-amqp/trunk/...

</quotepara><quotepara depth="3">This is a fairly common idiom. ActiveMQ do this, for instance :

</quotepara><quotepara depth="3"><url>http://svn.apache.org/viewvc/activemq/trunk/</url>
<url>http://svn.apache.org/viewvc/activemq/activemq-protobuf/trunk/</url>

</quotepara></quote><quotepara depth="2">Andrew.

</quotepara><quotepara depth="2">Yeah - I think this is my preferred solution.

</quotepara><quotepara depth="2">To my mind there's probably scope for things that are currently under
"trunk" to migrate to fully blown sub-projects over time, but I think the
immediate next step would be to introduce the

</quotepara><quotepara depth="2">/asf/qpid/transport/[trunk|branches|...]

</quotepara></quote><quotepara depth="1">I don't object to subprojects (indeed, it's attractive in many ways), but I
want us to have the bigger conversation about direction, first.

</quotepara><quotepara depth="1">The directories under qpid/trunk/qpid are already independent subprojects:

</quotepara><quotepara depth="1"> - They don't share code

</quotepara><quotepara depth="1"> - They don't share a build system or a test entry point

</quotepara><quotepara depth="1"> - They interface among themselves only optionally, just like independent
   projects do

</quotepara><quotepara depth="1"> - They are largely worked on by independent groups of people

</quotepara></quote><para depth="0">Actually, they are not really independent (which makes the situation
untenable)...  the directories have weird dependencies (possibly even
circular - though I haven't checked recently)... and they don't make
terribly much sense as independently releasable units.  They are generally
just broken down by language (which could be seen as a proxy for the group
of developers who work on them).

</para><quote depth="1"><quotepara depth="1">What they share is apache infrastructure (jira category, mailing lists) and
a release schedule.

</quotepara><quotepara depth="1">I don't like the pretending.  I want qpid to start to move in the direction
of real integration (this has some very tangible benefits), or explicitly
decide that these are independent (in code, apache infrastructure, and
release cycle).

</quotepara></quote><para depth="0">I agree we need to be clear in stating our goals.  In terms of integration
my focus would be on the user experience... that, to me, is what makes a
coherent project... Our internal development structure can follow our
external goals...

</para><para depth="0">To me a coherent project would mean that

</para><para depth="0">1) The clients have a common API
2) The brokers have similar functionality, configuration, etc ... and we
only need one set of docs to describe them

</para><para depth="0">We're getting there (slowly) on 1) but 2) isn't all that great right now.
Moreover we're also including a whole lot of other stuff in our builds that
essentially should be seen (IMHO) as independent.

</para><quote depth="1"><quotepara depth="1">Naturally, independent projects can have required dependencies, and under
that plan we can increase our code sharing (relative to what we have now) as
the transport intends to do.

</quotepara><quotepara depth="1">The downside of independent projects is, in a word, integration cost.
Without a common release, source tree, build system, and test harness, the
difficulty of maintaining a stable, coherent distribution is greater.

</quotepara></quote><para depth="0">I actually disagree here as I think that the discipline of properly defining
the component entities that go into making a release will be a better way of
ensuring code sharing and test sharing.  At the moment we are siloed by
language... but there should be no reason why broker system tests (for
instance) are dependent on language.

</para><quote depth="1"><quotepara depth="1">Indeed, that's the problem we face right now.  For instance, it's not easy
*at all* for a qpid developer to test a change to one qpid component across
the others.

</quotepara></quote><para depth="0">So, to turn the question around... why should (s)he have to?  if you are
changing the transport you pass your own unit/system tests for that
component.  If one of the "users" of the transport then finds a bug, it
should be reported through JIRA - just as if an external project finds a
bug.  The problems come about when we have unnecessary coupling between
entities that should be distinct.  The Java codebase is terrible at this in
as much as we run tests that simultaneously test both the client and the
broker rather than having separate tests for each.

</para><para depth="0">How do we want it to work?  How should we decide?
</para><quote depth="1"><quotepara depth="1">
</quotepara></quote><para depth="0">In my mind there are two aspects

</para><para depth="0">Firstly we should all have a common idea about what the goal of the project
is, and should all be aiming towards that.
Secondly we need define the best structure that allows for each developer to
work on the components they wish to work on *without it unduly affecting
work elsewhere*.

</para><para depth="0">Releasing all of Qpid in a single build/release should be easy if each
component is a self-contained and well tested unit.  On the other hand
(other than at major releases where there have been changes to the
interfaces/APIs) there's really no reason to have to release everything at
the same time.

</para><para depth="0">-- Rob

</para><quote depth="1"><quotefooter type="signature" depth="1" hash="15283087420905167534">Justin

</quotefooter><quotepara depth="1">---------------------------------------------------------------------
Apache Qpid - AMQP Messaging Implementation
Project:      <url>http://qpid.apache.org</url>
Use/Interact: mailto:<email>dev-subscribe@qpid.apache.org</email>

</quotepara></quote></body></message>