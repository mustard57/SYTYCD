<message message-id="20050930153854.17915.qmail@minotaur.apache.org" list="org.apache.ws.pubscribe-commits" id="24btnsv4tyhbqjgm" type="checkins" date="2005-09-30T15:38:52Z" year="2005-01-01" year-month="2005-09-01" year-month-day="2005-09-30" thread-id="24btnsv4tyhbqjgm"><headers><envelope-from-line>From pubscribe-commits-return-174-apmail-ws-pubscribe-commits-archive=ws.apache.org@ws.apache.org Fri Sep 30 15:39:18 2005</envelope-from-line><from personal="scamp@apache.org" address="scamp@apache.org">scamp@apache.org</from><to personal="pubscribe-cvs@ws.apache.org" address="pubscribe-cvs@ws.apache.org">pubscribe-cvs@ws.apache.org</to><subject normal="svn commit: r292777 - in /webservices/pubscribe/trunk: ./ src/java/org/apache/ws/eventing/ src/java/org/apache/ws/notification/base/ src/java/org/apache/ws/notification/base/v2004_06/impl/ src/java/org/apache/ws/notification/base/v2004_06/porttype/">svn commit: r292777 - in /webservices/pubscribe/trunk: ./
 src/java/org/apache/ws/eventing/ src/java/org/apache/ws/notification/base/
 src/java/org/apache/ws/notification/base/v2004_06/impl/
 src/java/org/apache/ws/notification/base/v2004_06/porttype/</subject><return-path>pubscribe-commits-return-174-apmail-ws-pubscribe-commits-archive=ws.apache.org@ws.apache.org</return-path><delivered-to>apmail-ws-pubscribe-commits-archive@www.apache.org</delivered-to><received>(qmail 18045 invoked from network); 30 Sep 2005 15:39:18 -0000</received><received>from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Sep 2005 15:39:18 -0000</received><received>(qmail 75907 invoked by uid 500); 30 Sep 2005 15:39:16 -0000</received><delivered-to>apmail-ws-pubscribe-commits-archive@ws.apache.org</delivered-to><received>(qmail 75826 invoked by uid 500); 30 Sep 2005 15:39:15 -0000</received><mailing-list>contact pubscribe-commits-help@ws.apache.org; run by ezmlm</mailing-list><precedence>bulk</precedence><list-help>&lt;mailto:pubscribe-commits-help@ws.apache.org&gt;</list-help><list-unsubscribe>&lt;mailto:pubscribe-commits-unsubscribe@ws.apache.org&gt;</list-unsubscribe><list-post>&lt;mailto:pubscribe-commits@ws.apache.org&gt;</list-post><list-id>&lt;pubscribe-commits.ws.apache.org&gt;</list-id><reply-to>pubscribe-dev@ws.apache.org</reply-to><delivered-to>mailing list pubscribe-commits@ws.apache.org</delivered-to><received>(qmail 75769 invoked by uid 500); 30 Sep 2005 15:39:15 -0000</received><delivered-to>apmail-ws-pubscribe-cvs@ws.apache.org</delivered-to><received>(qmail 75762 invoked by uid 99); 30 Sep 2005 15:39:15 -0000</received><x-asf-spam-status>No, hits=-9.8 required=10.0
	tests=ALL_TRUSTED,NO_REAL_NAME</x-asf-spam-status><x-spam-check-by>apache.org</x-spam-check-by><received>from [209.237.227.194] (HELO minotaur.apache.org) (209.237.227.194)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 30 Sep 2005 08:39:14 -0700</received><received>(qmail 17917 invoked by uid 65534); 30 Sep 2005 15:38:54 -0000</received><message-id>20050930153854.17915.qmail@minotaur.apache.org</message-id><content-type>text/plain; charset="utf-8"</content-type><mime-version>1.0</mime-version><content-transfer-encoding>7bit</content-transfer-encoding><date>Fri, 30 Sep 2005 15:38:52 -0000</date><x-mailer>svnmailer-1.0.5</x-mailer><x-virus-checked>Checked by ClamAV on apache.org</x-virus-checked><x-spam-rating>minotaur.apache.org 1.6.2 0/1000/N</x-spam-rating></headers><normalized-references><normalized-message-id>20050930153854.17915.qmail@minotaur.apache.org</normalized-message-id></normalized-references><body type="text/plain; charset=&quot;utf-8&quot;"><para depth="0">Author: scamp
Date: Fri Sep 30 08:38:48 2005
New Revision: 292777

</para><para depth="0">URL: <url>http://svn.apache.org/viewcvs?rev=292777&amp;view=rev</url>
Log:
Wired in the new resource prop for ProducerReference in the <br/>SubscriptionResource.java and extracted some strings into a constant class 

</para><para depth="0">Added:
<br/>webservices/pubscribe/trunk/src/java/org/apache/ws/notification/base/CustomBaseNotificationConstants.java 
Modified:
    webservices/pubscribe/trunk/maven.xml
<br/>webservices/pubscribe/trunk/src/java/org/apache/ws/eventing/SubscriptionHome.java 
<br/>webservices/pubscribe/trunk/src/java/org/apache/ws/notification/base/v2004_06/impl/SubscriptionHome.java 
<br/>webservices/pubscribe/trunk/src/java/org/apache/ws/notification/base/v2004_06/impl/SubscriptionResource.java 
<br/>webservices/pubscribe/trunk/src/java/org/apache/ws/notification/base/v2004_06/impl/SubscriptionService.java 
<br/>webservices/pubscribe/trunk/src/java/org/apache/ws/notification/base/v2004_06/porttype/SubscriptionManagerPortType.java 

</para><para depth="0">Modified: webservices/pubscribe/trunk/maven.xml
URL: <br/><url>http://svn.apache.org/viewcvs/webservices/pubscribe/trunk/maven.xml?rev=292777&amp;r1=292776&amp;r2=292777&amp;view=diff</url> 
==============================================================================
--- webservices/pubscribe/trunk/maven.xml (original)
+++ webservices/pubscribe/trunk/maven.xml Fri Sep 30 08:38:48 2005
@@ -80,6 +80,17 @@
   &lt;/goal&gt;

</para><para depth="0">   &lt;!-- ================================================================== --&gt;
+  &lt;!-- J A R : J A R                                                      --&gt;
+  &lt;!-- P R E - G O A L                                                    --&gt;
+  &lt;!-- ================================================================== --&gt;  
+  &lt;preGoal name="jar:jar"&gt;
+   &lt;mkdir dir="${maven.build.dest}/wsdl" /&gt;
+   &lt;!-- Extract SubMgr Wsdl from Generated Jar --&gt;
+ &lt;j:set var="wsdljar" value="${pom.getDependencyPath('wsn:submgr-xbeans')}"/&gt; 
+   &lt;attainGoal name="extract-wsdl-jar"/&gt;    
+  &lt;/preGoal&gt;
+
+  &lt;!-- ================================================================== --&gt;
   &lt;!-- W A R : W E B A P P                                                --&gt;
   &lt;!-- P R E - G O A L                                                  --&gt;
   &lt;!-- ================================================================== --&gt;

</para><para depth="0">Modified: <br/>webservices/pubscribe/trunk/src/java/org/apache/ws/eventing/SubscriptionHome.java 
URL: <br/><url>http://svn.apache.org/viewcvs/webservices/pubscribe/trunk/src/java/org/apache/ws/eventing/SubscriptionHome.java?rev=292777&amp;r1=292776&amp;r2=292777&amp;view=diff</url> 
==============================================================================
--- <br/>webservices/pubscribe/trunk/src/java/org/apache/ws/eventing/SubscriptionHome.java <br/>(original) 
+++ <br/>webservices/pubscribe/trunk/src/java/org/apache/ws/eventing/SubscriptionHome.java <br/>Fri Sep 30 08:38:48 2005 
@@ -24,6 +24,7 @@
 import org.apache.commons.logging.LogFactory;
 import org.apache.ws.addressing.EndpointReference;
import <br/>org.apache.ws.notification.base.v2004_06.impl.WsnNamespaceVersionHolderImpl; 
+import org.apache.ws.notification.base.CustomBaseNotificationConstants;
 import org.apache.ws.pubsub.Filter;
 import org.apache.ws.resource.JndiConstants;
 import org.apache.ws.resource.ResourceException;
@@ -45,25 +46,13 @@
 {
private static final Log LOG = LogFactory.getLog( <br/>SubscriptionHome.class.getName( ) ); 

</para><para depth="0">- /** The service endpoint name as registered with the SOAP Platform. This is <br/>useful for building EPR's. **/ 
-   public static final javax.xml.namespace.QName SERVICE_NAME =
- javax.xml.namespace.QName.valueOf( <br/>"{<url>http://ws.apache.org/notification/base/service/SubscriptionManager</url>}SubscriptionManager" <br/>); 
-
- /** The management PortType associated with this resource. This is useful for <br/>building EPR's.**/ 
-   public static final javax.xml.namespace.QName PORT_TYPE =
- javax.xml.namespace.QName.valueOf( <br/>"<url>http://ws.apache.org/notification/base/service/SubscriptionManager</url>}SubscriptionManagerPortType" <br/>); 
-
- /** The WSDL Port name associated with the resource. This is useful for <br/>building EPR's. **/ 
-   public static final String PORT_NAME = "SubscriptionManager";
-
-   /** The name of the resource key for this resource. **/
-   public static final javax.xml.namespace.QName RESOURCE_KEY_NAME =
- javax.xml.namespace.QName.valueOf( <br/>"{<url>http://ws.apache.org/notification/base/service/SubscriptionManager</url>}ResourceID" <br/>); 
+ /** The WSDL Port name associated with the resource. This is useful for <br/>building EPR's. **/ 
+    public static final String PORT_NAME = "SubscriptionManager";

</para><para depth="0">-   /** DOCUMENT_ME */
-   public static final String HOME_LOCATION =
- JndiConstants.CONTEXT_NAME_SERVICES + "/" + SERVICE_NAME.getLocalPart( ) + "/"
-      + JndiConstants.ATOMIC_NAME_HOME;
+    /** DOCUMENT_ME */
+    public static final String HOME_LOCATION =
+ JndiConstants.CONTEXT_NAME_SERVICES + "/" + <br/>CustomBaseNotificationConstants.SERVICE_NAME.getLocalPart( ) + "/" 
+       + JndiConstants.ATOMIC_NAME_HOME;
private static final NamespaceVersionHolder SPEC_NAMESPACE_SET = new <br/>WsnNamespaceVersionHolderImpl( ); 

</para><para depth="0">    /**
@@ -110,7 +99,7 @@
     */
    public QName getPortType(  )
    {
-      return PORT_TYPE;
+      return CustomBaseNotificationConstants.PORT_TYPE;
    }

</para><para depth="0">    /**
@@ -120,7 +109,7 @@
     */
    public QName getResourceKeyNameQName(  )
    {
-      return RESOURCE_KEY_NAME;
+      return CustomBaseNotificationConstants.RESOURCE_KEY_NAME;
    }

</para><para depth="0">    /**
@@ -130,7 +119,7 @@
     */
    public QName getServiceName(  )
    {
-      return SERVICE_NAME;
+      return CustomBaseNotificationConstants.SERVICE_NAME;
    }

</para><para depth="0">    /**

</para><para depth="0">Added: <br/>webservices/pubscribe/trunk/src/java/org/apache/ws/notification/base/CustomBaseNotificationConstants.java 
URL: <br/><url>http://svn.apache.org/viewcvs/webservices/pubscribe/trunk/src/java/org/apache/ws/notification/base/CustomBaseNotificationConstants.java?rev=292777&amp;view=auto</url> 
==============================================================================
--- <br/>webservices/pubscribe/trunk/src/java/org/apache/ws/notification/base/CustomBaseNotificationConstants.java <br/>(added) 
+++ <br/>webservices/pubscribe/trunk/src/java/org/apache/ws/notification/base/CustomBaseNotificationConstants.java <br/>Fri Sep 30 08:38:48 2005 
@@ -0,0 +1,22 @@
+package org.apache.ws.notification.base;
+
+import javax.xml.namespace.QName;
+
+/**
+ * Constants for our impl of SubscriptionManager
+ * 
+ * @author Sal Campana
+ */
+public interface CustomBaseNotificationConstants
+{
+ String TARGET_NAMESPACE = <br/>"<url>http://ws.apache.org/notification/base/service/SubscriptionManager</url>"; 
+ /** The service endpoint name as registered with the SOAP Platform. This is <br/>useful for building EPR's. **/ 
+ javax.xml.namespace.QName SERVICE_NAME = new <br/>QName(TARGET_NAMESPACE,"SubscriptionManager" ); 
+
+ /** The management PortType associated with this resource. This is useful for <br/>building EPR's.**/ 
+ javax.xml.namespace.QName PORT_TYPE = new <br/>QName(TARGET_NAMESPACE,"SubscriptionManagerPortType" ); 
+
+    /** The name of the resource key for this resource. **/
+ javax.xml.namespace.QName RESOURCE_KEY_NAME = new <br/>QName(TARGET_NAMESPACE,"ResourceID" ); 
+
+}

</para><para depth="0">Modified: <br/>webservices/pubscribe/trunk/src/java/org/apache/ws/notification/base/v2004_06/impl/SubscriptionHome.java 
URL: <br/><url>http://svn.apache.org/viewcvs/webservices/pubscribe/trunk/src/java/org/apache/ws/notification/base/v2004_06/impl/SubscriptionHome.java?rev=292777&amp;r1=292776&amp;r2=292777&amp;view=diff</url> 
==============================================================================
--- <br/>webservices/pubscribe/trunk/src/java/org/apache/ws/notification/base/v2004_06/impl/SubscriptionHome.java <br/>(original) 
+++ <br/>webservices/pubscribe/trunk/src/java/org/apache/ws/notification/base/v2004_06/impl/SubscriptionHome.java <br/>Fri Sep 30 08:38:48 2005 
@@ -18,6 +18,7 @@
 import org.apache.ws.addressing.EndpointReference;
 import org.apache.ws.notification.base.Subscription;
 import org.apache.ws.notification.base.WsnNamespaceVersionHolder;
+import org.apache.ws.notification.base.CustomBaseNotificationConstants;
 import org.apache.ws.notification.topics.expression.TopicExpression;
 import org.apache.ws.resource.ResourceException;
 import org.apache.ws.resource.impl.AbstractResourceHome;
@@ -37,28 +38,12 @@
 public class SubscriptionHome
    extends AbstractResourceHome
 {
-   /**
- * The service endpoint name as registered with the SOAP Platform. This is <br/>useful for building EPRs. 
-    */
-   public static final javax.xml.namespace.QName SERVICE_NAME =
- javax.xml.namespace.QName.valueOf( <br/>"{<url>http://ws.apache.org/notification/base/service/SubscriptionManager</url>}SubscriptionManager" <br/>); 
-
-   /**
- * The management PortType associated with this resource. This is useful for <br/>building EPRs. 
-    */
-   public static final javax.xml.namespace.QName PORT_TYPE =
- javax.xml.namespace.QName.valueOf( <br/>"{<url>http://ws.apache.org/notification/base/service/SubscriptionManager</url>}SubscriptionManagerPortType" <br/>); 

</para><para depth="0">    /**
* The WSDL Port name associated with the resource. This is useful for building <br/>EPRs. 
     */
    public static final String PORT_NAME = "SubscriptionManager";

</para><para depth="0">-   /**
-    * The name of the resource key for this resource. *
-    */
-   public static final javax.xml.namespace.QName RESOURCE_KEY_NAME =
- javax.xml.namespace.QName.valueOf( <br/>"{<url>http://ws.apache.org/notification/base/service/SubscriptionManager</url>}ResourceID" <br/>); 

</para><para depth="0">private static final NamespaceVersionHolder SPEC_NAMESPACE_SET = new <br/>WsnNamespaceVersionHolderImpl( ); 

</para><para depth="0">@@ -86,7 +71,7 @@
     */
    public QName getPortType(  )
    {
-      return PORT_TYPE;
+      return CustomBaseNotificationConstants.PORT_TYPE;
    }

</para><para depth="0">    /**
@@ -96,7 +81,7 @@
     */
    public QName getResourceKeyNameQName(  )
    {
-      return RESOURCE_KEY_NAME;
+      return CustomBaseNotificationConstants.RESOURCE_KEY_NAME;
    }

</para><para depth="0">    /**
@@ -106,7 +91,7 @@
     */
    public QName getServiceName(  )
    {
-      return SERVICE_NAME;
+      return CustomBaseNotificationConstants.SERVICE_NAME;
    }

</para><para depth="0">    /**

</para><para depth="0">Modified: <br/>webservices/pubscribe/trunk/src/java/org/apache/ws/notification/base/v2004_06/impl/SubscriptionResource.java 
URL: <br/><url>http://svn.apache.org/viewcvs/webservices/pubscribe/trunk/src/java/org/apache/ws/notification/base/v2004_06/impl/SubscriptionResource.java?rev=292777&amp;r1=292776&amp;r2=292777&amp;view=diff</url> 
==============================================================================
--- <br/>webservices/pubscribe/trunk/src/java/org/apache/ws/notification/base/v2004_06/impl/SubscriptionResource.java <br/>(original) 
+++ <br/>webservices/pubscribe/trunk/src/java/org/apache/ws/notification/base/v2004_06/impl/SubscriptionResource.java <br/>Fri Sep 30 08:38:48 2005 
@@ -21,6 +21,8 @@
 import org.apache.ws.addressing.v2003_03.AddressingConstants;
 import org.apache.ws.notification.base.impl.AbstractSubscription;
import <br/>org.apache.ws.notification.base.v2004_06.porttype.SubscriptionManagerPortType; 
+import <br/>org.apache.ws.notification.base.service.subscriptionManager.SubscriptionManagerRPDocument; 
+import <br/>org.apache.ws.notification.base.service.subscriptionManager.ProducerReferenceDocument; 
 import org.apache.ws.notification.topics.TopicsTypeWriter;
 import org.apache.ws.notification.topics.expression.TopicExpression;
 import org.apache.ws.notification.topics.v2004_06.TopicsConstants;
@@ -36,7 +38,6 @@
import <br/>org.oasisOpen.docs.wsn.x2004.x06.wsnWSBaseNotification12Draft01.CreationTimeDocument; 
import <br/>org.oasisOpen.docs.wsn.x2004.x06.wsnWSBaseNotification12Draft01.PreconditionDocument; 
import <br/>org.oasisOpen.docs.wsn.x2004.x06.wsnWSBaseNotification12Draft01.SelectorDocument; 
-import <br/>org.oasisOpen.docs.wsn.x2004.x06.wsnWSBaseNotification12Draft01.SubscriptionManagerRPDocument; 
import <br/>org.oasisOpen.docs.wsn.x2004.x06.wsnWSBaseNotification12Draft01.SubscriptionPolicyDocument; 
import <br/>org.oasisOpen.docs.wsn.x2004.x06.wsnWSBaseNotification12Draft01.TopicExpressionDocument; 
import <br/>org.oasisOpen.docs.wsn.x2004.x06.wsnWSBaseNotification12Draft01.TopicExpressionType; 
@@ -90,6 +91,7 @@
      */
     public void init()
     {
+
SubscriptionManagerRPDocument propsDoc = <br/>SubscriptionManagerRPDocument.Factory.newInstance(); 
         ResourcePropertySetMetaData propSetMetaData =
new XmlBeansResourcePropertySetMetaData( propsDoc.schemaType(), <br/>READ_ONLY_PROP_NAMES ); 
@@ -108,6 +110,12 @@
TerminationTimeDocument termTimeDoc = <br/>TerminationTimeDocument.Factory.newInstance(); 
         termTimeDoc.setTerminationTime( getTerminationTime() );
         prop.add( termTimeDoc );
+
+        //Custom Prop
+ prop = <br/>m_propSet.get(SubscriptionManagerPortType.PROP_QNAME_PRODUCER_REFERENCE); 
+ ProducerReferenceDocument producerRefDoc = <br/>ProducerReferenceDocument.Factory.newInstance(); 
+ producerRefDoc.setProducerReference((EndpointReferenceType) ( <br/>(XmlBeansEndpointReference) m_producerReference ) 
+                .getXmlObject( AddressingConstants.NSURI_ADDRESSING_SCHEMA ) );

</para><para depth="0">         // wsntw:SubscriptionManager props
prop = m_propSet.get( SubscriptionManagerPortType.PROP_QNAME_CONSUMER_REFERENCE <br/>); 

</para><para depth="0">Modified: <br/>webservices/pubscribe/trunk/src/java/org/apache/ws/notification/base/v2004_06/impl/SubscriptionService.java 
URL: <br/><url>http://svn.apache.org/viewcvs/webservices/pubscribe/trunk/src/java/org/apache/ws/notification/base/v2004_06/impl/SubscriptionService.java?rev=292777&amp;r1=292776&amp;r2=292777&amp;view=diff</url> 
==============================================================================
--- <br/>webservices/pubscribe/trunk/src/java/org/apache/ws/notification/base/v2004_06/impl/SubscriptionService.java <br/>(original) 
+++ <br/>webservices/pubscribe/trunk/src/java/org/apache/ws/notification/base/v2004_06/impl/SubscriptionService.java <br/>Fri Sep 30 08:38:48 2005 
@@ -17,6 +17,7 @@

</para><para depth="0">import <br/>org.apache.ws.notification.base.v2004_06.porttype.SubscriptionManagerPortType; 
import <br/>org.apache.ws.notification.base.v2004_06.porttype.impl.SubscriptionManagerPortTypeImpl; 
+import org.apache.ws.notification.base.CustomBaseNotificationConstants;
 import org.apache.ws.resource.ResourceContext;
 import org.apache.ws.resource.handler.ServiceSoapMethodNameMap;
 import org.apache.ws.resource.handler.SoapMethodNameMap;
@@ -38,8 +39,7 @@
<br/>org.apache.ws.resource.lifetime.v2004_06.porttype.ImmediateResourceTerminationPortType 
 {
    /** DOCUMENT_ME */
-   public static final String TARGET_NSURI      =
-      "<url>http://ws.apache.org/notification/base/service/SubscriptionManager</url>";
+ public static final String TARGET_NSURI = <br/>CustomBaseNotificationConstants.TARGET_NAMESPACE; 

</para><para depth="0">    /** DOCUMENT_ME */
    public static final String TARGET_NSPREFIX   = "SubscriptionManager";

</para><para depth="0">Modified: <br/>webservices/pubscribe/trunk/src/java/org/apache/ws/notification/base/v2004_06/porttype/SubscriptionManagerPortType.java 
URL: <br/><url>http://svn.apache.org/viewcvs/webservices/pubscribe/trunk/src/java/org/apache/ws/notification/base/v2004_06/porttype/SubscriptionManagerPortType.java?rev=292777&amp;r1=292776&amp;r2=292777&amp;view=diff</url> 
==============================================================================
--- <br/>webservices/pubscribe/trunk/src/java/org/apache/ws/notification/base/v2004_06/porttype/SubscriptionManagerPortType.java <br/>(original) 
+++ <br/>webservices/pubscribe/trunk/src/java/org/apache/ws/notification/base/v2004_06/porttype/SubscriptionManagerPortType.java <br/>Fri Sep 30 08:38:48 2005 
@@ -48,6 +48,14 @@
new QName( BaseNotificationConstants.NSURI_WSNT_SCHEMA.toString(), <br/>"ConsumerReference", 
                  BaseNotificationConstants.NSPREFIX_WSNT_SCHEMA );

</para><para depth="0">+    /**
+     * ProducerReference property name.
+     */
+    QName PROP_QNAME_PRODUCER_REFERENCE =
+ new <br/>QName("<url>http://ws.apache.org/notification/base/service/SubscriptionManager</url>", <br/>"ProducerReference", 
+                  BaseNotificationConstants.NSPREFIX_WSNT_SCHEMA );
+
+
    /**
     * TopicExpression property name.
     */

</para></body></message>