<message message-id="203704519.66603.1307124707872.JavaMail.tomcat@hel.zones.apache.org" list="org.apache.hadoop.zookeeper-dev" id="24b2jj7oo6io74cy" type="bugs" date="2011-06-03T18:11:47Z" year="2011-01-01" year-month="2011-06-01" year-month-day="2011-06-03" thread-id="ldnrhqzqwpabkxcl"><headers><envelope-from-line>Fri Jun 03 10:12:33 2011</envelope-from-line><from personal="Vishal K (JIRA)" address="jira@apache.org">"Vishal K (JIRA)" &lt;jira@apache.org&gt;</from><to personal="dev@zookeeper.apache.org" address="dev@zookeeper.apache.org">dev@zookeeper.apache.org</to><subject normal="[jira] [Commented] (ZOOKEEPER-335) zookeeper servers should commit the new leader txn to their logs.">[jira] [Commented] (ZOOKEEPER-335) zookeeper servers should commit the new leader txn to their logs.</subject><received>from srv-117d-be06.markmail.marklogic.com ([172.19.8.66])
          by mail-1.a.markmail.int (JAMES SMTP Server 2.3.1) with SMTP ID 876
          for &lt;monte.gray.dennis@a.markmail.org&gt;;
          Fri, 3 Jun 2011 10:12:33 -0800 (GMT-08:00)</received><received>from mail.apache.org (slb-117n.markmail.marklogic.com [172.19.8.33])
	by mgw-2.public.markmail.int (Postfix) with SMTP id 35E213B30273
	for &lt;monte.gray.dennis@a.markmail.org&gt;; Fri,  3 Jun 2011 11:12:10 -0700 (PDT)</received><received>(qmail 87536 invoked by uid 500); 3 Jun 2011 18:12:31 -0000</received><mailing-list>contact dev-help@zookeeper.apache.org; run by ezmlm</mailing-list><precedence>bulk</precedence><list-help>&lt;mailto:dev-help@zookeeper.apache.org&gt;</list-help><list-unsubscribe>&lt;mailto:dev-unsubscribe@zookeeper.apache.org&gt;</list-unsubscribe><list-post>&lt;mailto:dev@zookeeper.apache.org&gt;</list-post><list-id>&lt;dev.zookeeper.apache.org&gt;</list-id><reply-to>dev@zookeeper.apache.org</reply-to><delivered-to>mailing list dev@zookeeper.apache.org</delivered-to><received>(qmail 87501 invoked by uid 99); 3 Jun 2011 18:12:31 -0000</received><received>from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jun 2011 18:12:31 +0000</received><x-asf-spam-status>No, hits=-2000.0 required=5.0
	tests=ALL_TRUSTED,T_RP_MATCHES_RCVD</x-asf-spam-status><x-spam-check-by>apache.org</x-spam-check-by><received>from [140.211.11.116] (HELO hel.zones.apache.org) (140.211.11.116)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jun 2011 18:12:28 +0000</received><received>from hel.zones.apache.org (hel.zones.apache.org [140.211.11.116])
	by hel.zones.apache.org (Postfix) with ESMTP id D60C7F20FF
	for &lt;dev@zookeeper.apache.org&gt;; Fri,  3 Jun 2011 18:11:47 +0000 (UTC)</received><date>Fri, 3 Jun 2011 18:11:47 +0000 (UTC)</date><message-id>203704519.66603.1307124707872.JavaMail.tomcat@hel.zones.apache.org</message-id><mime-version>1.0</mime-version><content-type>text/plain; charset=utf-8</content-type><content-transfer-encoding>7bit</content-transfer-encoding><x-jira-fingerprint>30527f35849b9dde25b450d4833f0394</x-jira-fingerprint><x-virus-checked>Checked by ClamAV on apache.org</x-virus-checked></headers><normalized-references><normalized-message-id>203704519.66603.1307124707872.JavaMail.tomcat@hel.zones.apache.org</normalized-message-id></normalized-references><body type="text/plain; charset=utf-8"><para depth="0">
    [<br/><url>https://issues.apache.org/jira/browse/ZOOKEEPER-335?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&amp;focusedCommentId=13043926#comment-13043926</url><br/>] 

</para><para depth="0">Vishal K commented on ZOOKEEPER-335:
</para><footer type="noise" depth="0">------------------------------------

</footer><para depth="0">I am able to repro the bug reliably.
{quote}
but i'm curious if it fixes your problem.
{quote}
What are you referring to? The client side does fix the problem for us, but it<br/>is a bit ugly fix.

</para><quote depth="1"><quotepara depth="1">zookeeper servers should commit the new leader txn to their logs.
</quotepara><quotepara depth="1">-----------------------------------------------------------------

</quotepara><quotepara depth="1">                Key: ZOOKEEPER-335
                URL: <url>https://issues.apache.org/jira/browse/ZOOKEEPER-335</url>
            Project: ZooKeeper
         Issue Type: Bug
         Components: server
   Affects Versions: 3.1.0
           Reporter: Mahadev konar
           Assignee: Mahadev konar
           Priority: Blocker
            Fix For: 3.4.0

</quotepara><quotepara depth="1">        Attachments: ZOOKEEPER-790.travis.log.bz2, faultynode-vishal.txt,<br/>zk.log.gz, zklogs.tar.gz

</quotepara><quotepara depth="1">currently the zookeeper followers do not commit the new leader election. This<br/>will cause problems in a failure scenarios with a follower acking to the same<br/>leader txn id twice, which might be two different intermittent leaders and<br/>allowing them to propose two different txn's of the same zxid.
</quotepara></quote><footer type="noise" depth="0">
</footer><footer type="signature" depth="0" hash="16294502281639514258">--
This message is automatically generated by JIRA.
For more information on JIRA, see: <url>http://www.atlassian.com/software/jira</url>
</footer></body></message>