<message message-id="19389287.1180006983302.JavaMail.jboss@colo-br-02.atl.jboss.com" list="org.jboss.lists.jboss-user" id="24ciyfahpigkfjvm" type="users" date="2007-05-24T07:43:03" year="2007-01-01" year-month="2007-05-01" year-month-day="2007-05-24" thread-id="24ciyfahpigkfjvm"><headers><envelope-from-line>From do-not-reply@jboss.com  Thu May 24 07:43:03 2007</envelope-from-line><from personal="purplehaze" address="do-not-reply@jboss.com">purplehaze &lt;do-not-reply@jboss.com&gt;</from><subject normal="[jboss-user] [JBoss Seam] - DataSource injection in entity">[jboss-user] [JBoss Seam] - DataSource injection in entity</subject><x-spam-checker-version>SpamAssassin 3.2.4 (2008-01-01) on
	spam-1.dev.markmail.int</x-spam-checker-version><x-spam-level/><x-spam-status>No, score=-1.8 required=5.0 tests=BAYES_00,INVALID_DATE,
	MISSING_HEADERS,NO_RECEIVED,NO_RELAYS autolearn=disabled version=3.2.4</x-spam-status><date>Mon Sep 17 13:03:21 2007</date><message-id>19389287.1180006983302.JavaMail.jboss@colo-br-02.atl.jboss.com</message-id><content-type>text/plain; charset=iso-8859-1</content-type><mime-version>1.0</mime-version></headers><normalized-references><normalized-message-id>19389287.1180006983302.JavaMail.jboss@colo-br-02.atl.jboss.com</normalized-message-id></normalized-references><body type="text/plain; charset=iso-8859-1"><para depth="0">
Hello.

</para><para depth="0">I must get some data in entity from a stored proc.
this data belons to this entity. 
It is very old, legacy DB.

</para><para depth="0">For this I need a DataSource.getConnection()
like this

</para><para depth="0">	Connection conn = ds.getConnection();
	CallableStatement cs = conn.prepareCall(sql);

</para><para depth="0">How can I inject DataSource, or maybe StatelesBean with this DataSource
in my Entity.

</para><para depth="0">I have tried it with @EJB and @In
but it didn't work. I get:

</para><para depth="0">  | ...
  | Caused by: java.lang.reflect.InvocationTargetException
  | 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
  | 	at<br/>sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
  | 	at<br/>sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
  | 	at java.lang.reflect.Method.invoke(Method.java:585)
  | 	at<br/>org.apache.myfaces.el.PropertyResolverImpl.getProperty(PropertyResolverImpl.java:438)
  | 	... 61 more
  | Caused by: java.lang.NullPointerException
  | 	at<br/>de.arvatoservices.web_france.entity.CatalogItem.callSP(CatalogItem.java:168)
  | 	at<br/>de.arvatoservices.web_france.entity.CatalogItem.getPysits(CatalogItem.java:141)
  | 	at<br/>de.arvatoservices.web_france.entity.CatalogItemHome.getPysits(CatalogItemHome.java:72)
  | 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
  | 	at<br/>sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
  | 	at<br/>sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
  | 	at java.lang.reflect.Method.invoke(Method.java:585)
  | 	at org.jboss.seam.util.Reflections.invoke(Reflections.java:20)
  | 	at<br/>org.jboss.seam.intercept.RootInvocationContext.proceed(RootInvocationContext.java:31)
  | 	at<br/>org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:57)
  | 	at<br/>org.jboss.seam.interceptors.BijectionInterceptor.aroundInvoke(BijectionInterceptor.java:47)
  | 	at<br/>org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:69)
  | 	at<br/>org.jboss.seam.interceptors.ManagedEntityIdentityInterceptor.aroundInvoke(ManagedEntityIdentityInterceptor.java:37)
  | 	at<br/>org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:69)
  | 	at<br/>org.jboss.seam.interceptors.RollbackInterceptor.aroundInvoke(RollbackInterceptor.java:34)
  | 	at<br/>org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:69)
  | 	at<br/>org.jboss.seam.interceptors.TransactionInterceptor$1.work(TransactionInterceptor.java:32)
  | 	at org.jboss.seam.util.Work.workInTransaction(Work.java:37)
  | 	at<br/>org.jboss.seam.interceptors.TransactionInterceptor.aroundInvoke(TransactionInterceptor.java:27)
  | 	at<br/>org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:69)
  | 	at org.jboss.seam.interceptors.MethodContextInterceptor.aro
  | 13:32:15,028 ERROR [STDERR] undInvoke(MethodContextInterceptor.java:27)
  | 	at<br/>org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:69)
  | 	at<br/>org.jboss.seam.intercept.RootInterceptor.invoke(RootInterceptor.java:103)
  | 	at<br/>org.jboss.seam.intercept.JavaBeanInterceptor.interceptInvocation(JavaBeanInterceptor.java:151)
  | 	at<br/>org.jboss.seam.intercept.JavaBeanInterceptor.invoke(JavaBeanInterceptor.java:87)
  | 	at<br/>de.arvatoservices.web_france.entity.CatalogItemHome_$$_javassist_152.getPysits(CatalogItemHome_$$_javassist_152.java)
  | 	... 66 more

</para><para depth="0">Any Ideas?

</para><para depth="0">View the original post :<br/><url>http://www.jboss.com/index.html?module=bb&amp;op=viewtopic&amp;p=4048225#4048225</url>

</para><para depth="0">Reply to the post :<br/><url>http://www.jboss.com/index.html?module=bb&amp;op=posting&amp;mode=reply&amp;p=4048225</url>

</para></body></message>