<message message-id="1305579685-22789-5-git-send-email-hverbeet@codeweavers.com" list="org.winehq.wine-patches" id="24bp4mdct52w7be4" type="development" date="2011-05-16T23:01:25+02:00" year="2011-01-01" year-month="2011-05-01" year-month-day="2011-05-16" thread-id="24bp4mdct52w7be4"><headers><envelope-from-line>Mon May 16 13:04:23 2011</envelope-from-line><from personal="Henri Verbeet" address="hverbeet@codeweavers.com">Henri Verbeet &lt;hverbeet@codeweavers.com&gt;</from><to personal="wine-patches@winehq.org" address="wine-patches@winehq.org">wine-patches@winehq.org</to><subject normal="[PATCH 5/5] wined3d: Get rid of the glsl_program_key_t typedef.">[PATCH 5/5] wined3d: Get rid of the glsl_program_key_t typedef.</subject><received>from srv-117d-be06.markmail.marklogic.com ([172.19.8.66])
          by mail-1.a.markmail.int (JAMES SMTP Server 2.3.1) with SMTP ID 582
          for &lt;shaun.saunders.compton@a.markmail.org&gt;;
          Mon, 16 May 2011 13:04:23 -0800 (GMT-08:00)</received><received>from wine.codeweavers.com (slb-117n.markmail.marklogic.com [172.19.8.33])
	by mgw-2.public.markmail.int (Postfix) with ESMTP id BC0613B300BA
	for &lt;shaun.saunders.compton@a.markmail.org&gt;; Mon, 16 May 2011 14:04:00 -0700 (PDT)</received><received>from localhost
	([127.0.0.1] helo=localhost.localdomain ident=list)
	by wine.codeweavers.com with esmtp (Exim 4.69)
	(envelope-from &lt;wine-patches-bounces@winehq.org&gt;)
	id 1QM4xg-0006tv-89; Mon, 16 May 2011 16:04:23 -0500</received><received>from mail.codeweavers.com ([216.251.189.131] ident=Debian-exim)
	by wine.codeweavers.com with esmtp (Exim 4.69)
	(envelope-from &lt;hverbeet@codeweavers.com&gt;) id 1QM4vS-0006G4-FG
	for wine-patches@winehq.org; Mon, 16 May 2011 16:02:06 -0500</received><received>from foghorn.codeweavers.com ([216.251.189.130]
	helo=localhost.localdomain)
	by mail.codeweavers.com with esmtp (Exim 4.69)
	(envelope-from &lt;hverbeet@codeweavers.com&gt;) id 1QM4v7-0001ev-Em
	for wine-patches@winehq.org; Mon, 16 May 2011 16:01:41 -0500</received><date>Mon, 16 May 2011 23:01:25 +0200</date><message-id>1305579685-22789-5-git-send-email-hverbeet@codeweavers.com</message-id><x-mailer>git-send-email 1.7.3.4</x-mailer><x-spam-score>-4.4</x-spam-score><x-beenthere>wine-patches@winehq.org</x-beenthere><x-mailman-version>2.1.11</x-mailman-version><precedence>list</precedence><reply-to>wine-devel@winehq.org</reply-to><list-id>Wine Patch Submissions &lt;wine-patches.winehq.org&gt;</list-id><list-unsubscribe>&lt;http://www.winehq.org/mailman/options/wine-patches&gt;,
	&lt;mailto:wine-patches-request@winehq.org?subject=unsubscribe&gt;</list-unsubscribe><list-archive>&lt;http://www.winehq.org/pipermail/wine-patches&gt;</list-archive><list-post>&lt;mailto:wine-patches@winehq.org&gt;</list-post><list-help>&lt;mailto:wine-patches-request@winehq.org?subject=help&gt;</list-help><list-subscribe>&lt;http://www.winehq.org/mailman/listinfo/wine-patches&gt;,
	&lt;mailto:wine-patches-request@winehq.org?subject=subscribe&gt;</list-subscribe><mime-version>1.0</mime-version><content-type>text/plain; charset="us-ascii"</content-type><content-transfer-encoding>7bit</content-transfer-encoding><sender>wine-patches-bounces@winehq.org</sender><errors-to>wine-patches-bounces@winehq.org</errors-to><x-spam-score>-4.4</x-spam-score></headers><normalized-references><normalized-message-id>1305579685-22789-5-git-send-email-hverbeet@codeweavers.com</normalized-message-id></normalized-references><body type="text/plain; charset=&quot;us-ascii&quot;"><para depth="0">---
 dlls/wined3d/glsl_shader.c |   16 +++++++++-------
 1 files changed, 9 insertions(+), 7 deletions(-)

</para><para depth="0">diff --git a/dlls/wined3d/glsl_shader.c b/dlls/wined3d/glsl_shader.c
index d6e30dd..e9b378e 100644
--- a/dlls/wined3d/glsl_shader.c
+++ b/dlls/wined3d/glsl_shader.c
@@ -117,12 +117,13 @@ struct glsl_shader_prog_link {
     const struct ps_np2fixup_info *np2Fixup_info;
 };

</para><para depth="0">-typedef struct {
+struct glsl_program_key
+{
     const struct wined3d_shader *vshader;
     const struct wined3d_shader *pshader;
     struct ps_compile_args      ps_args;
     struct vs_compile_args      vs_args;
-} glsl_program_key_t;
+};

</para><para depth="0"> struct shader_glsl_ctx_priv {
     const struct vs_compile_args    *cur_vs_args;
@@ -3701,8 +3702,9 @@ static void shader_glsl_input_pack(const struct<br/>wined3d_shader *shader, struct w
  * Vertex Shader Specific Code begins here
  ********************************************/

</para><para depth="0">-static void add_glsl_program_entry(struct shader_glsl_priv *priv, struct<br/>glsl_shader_prog_link *entry) {
-    glsl_program_key_t key;
+static void add_glsl_program_entry(struct shader_glsl_priv *priv, struct<br/>glsl_shader_prog_link *entry)
+{
+    struct glsl_program_key key;

</para><para depth="0">     key.vshader = entry-&gt;vshader;
     key.pshader = entry-&gt;pshader;
@@ -3720,7 +3722,7 @@ static struct glsl_shader_prog_link<br/>*get_glsl_program_entry(struct shader_glsl_p
         struct vs_compile_args *vs_args, struct ps_compile_args *ps_args)
 {
     struct wine_rb_entry *entry;
-    glsl_program_key_t key;
+    struct glsl_program_key key;

</para><para depth="0">     key.vshader = vshader;
     key.pshader = pshader;
@@ -3735,7 +3737,7 @@ static struct glsl_shader_prog_link<br/>*get_glsl_program_entry(struct shader_glsl_p
 static void delete_glsl_program_entry(struct shader_glsl_priv *priv, const<br/>struct wined3d_gl_info *gl_info,
         struct glsl_shader_prog_link *entry)
 {
-    glsl_program_key_t key;
+    struct glsl_program_key key;

</para><para depth="0">     key.vshader = entry-&gt;vshader;
     key.pshader = entry-&gt;pshader;
@@ -4784,7 +4786,7 @@ static void shader_glsl_destroy(struct wined3d_shader<br/>*shader)

</para><para depth="0"> static int glsl_program_key_compare(const void *key, const struct wine_rb_entry<br/>*entry)
 {
-    const glsl_program_key_t *k = key;
+    const struct glsl_program_key *k = key;
     const struct glsl_shader_prog_link *prog = WINE_RB_ENTRY_VALUE(entry,
             const struct glsl_shader_prog_link, program_lookup_entry);
     int cmp;
</para><footer type="signature" depth="0" hash="2665454813625784166">-- 
1.7.3.4

</footer></body></message>