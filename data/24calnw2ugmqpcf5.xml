<message message-id="3D42A540.7000904@unix.sh" list="org.kernel.vger.linux-kernel" id="24calnw2ugmqpcf5" type="development" date="2002-07-27T07:50:56-06:00" year="2002-01-01" year-month="2002-07-01" year-month-day="2002-07-27" thread-id="oirvzer2oetfiwt5"><headers><envelope-from-line>From linux-kernel-owner+akpm=40zip.com.au@vger.kernel.org  Sat Jul 27 06:55:49 2002</envelope-from-line><from personal="Alan Robertson" address="alanr@unix.sh">Alan Robertson &lt;alanr@unix.sh&gt;</from><to personal="Alan Cox" address="alan@lxorguk.ukuu.org.uk">Alan Cox &lt;alan@lxorguk.ukuu.org.uk&gt;</to><cc personal="Isabelle, Francois" address="Francois.Isabelle@ca.kontron.com">"Isabelle, Francois" &lt;Francois.Isabelle@ca.kontron.com&gt;</cc><subject normal="Handling NMI in a kernel module">Re: Handling NMI in a kernel module</subject><received>from localhost.localdomain [127.0.0.1]
	by localhost with POP3 (fetchmail-5.7.4)
	for akpm@localhost (single-drop); Sat, 27 Jul 2002 06:55:49 -0700 (PDT)</received><received>by mangalore (mbox akpm)
 (with Cubic Circle's cucipop (v1.31 1998/05/13) Sat Jul 27 23:57:28 2002)</received><x-from_>linux-kernel-owner+akpm=40zip.com.au@vger.kernel.org  Sat Jul 27 23:53:57 2002</x-from_><return-path>linux-kernel-owner+akpm=40zip.com.au@vger.kernel.org</return-path><received>from vger.kernel.org (vger.kernel.org [209.116.70.75])
	by mangalore.zipworld.com.au (8.9.3/8.9.3) with ESMTP id XAA27628
	for &lt;akpm@zip.com.au&gt;; Sat, 27 Jul 2002 23:53:55 +1000</received><received>(majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id &lt;S318757AbSG0Nsx&gt;; Sat, 27 Jul 2002 09:48:53 -0400</received><received>(majordomo@vger.kernel.org) by vger.kernel.org
	id &lt;S318756AbSG0Nsx&gt;; Sat, 27 Jul 2002 09:48:53 -0400</received><received>from cpe-24-221-212-80.co.sprintbbd.net ([24.221.212.80]:55033 "EHLO
	servidor.linux-ha.org") by vger.kernel.org with ESMTP
	id &lt;S318757AbSG0Nsx&gt;; Sat, 27 Jul 2002 09:48:53 -0400</received><received>from unix.sh (localhost [127.0.0.1])
	by servidor.linux-ha.org (Postfix on SuSE Linux 8.0 (i386)) with ESMTP
	id 4E12F305E1; Sat, 27 Jul 2002 07:50:56 -0600 (MDT)</received><message-id>3D42A540.7000904@unix.sh</message-id><date>Sat, 27 Jul 2002 07:50:56 -0600</date><organization>IBM Linux Technology Center</organization><user-agent>Mozilla/5.0 (X11; U; Linux i686; en-US; rv:0.9.8) Gecko/20020204</user-agent><x-accept-language>en-us</x-accept-language><mime-version>1.0</mime-version><in-reply-to>&lt;5009AD9521A8D41198EE00805F85F18F219A7E@sembo111.teknor.com&gt;	&lt;3D41C544.9090702@unix.sh&gt;	&lt;1027735557.15951.3.camel@irongate.swansea.linux.org.uk&gt; 	&lt;3D4213D4.6020705@unix.sh&gt; &lt;1027773582.17404.2.camel@irongate.swansea.linux.org.uk&gt;</in-reply-to><content-type>text/plain; charset=us-ascii; format=flowed</content-type><content-transfer-encoding>7bit</content-transfer-encoding><sender>linux-kernel-owner@vger.kernel.org</sender><precedence>bulk</precedence><x-mailing-list>linux-kernel@vger.kernel.org</x-mailing-list><x-spam-status>No, hits=0.0 required=2.5 tests= version=2.01</x-spam-status><status>RO</status><x-status/><x-keywords/><x-uid>5667</x-uid></headers><normalized-references><normalized-message-id>3D42A540.7000904@unix.sh</normalized-message-id><normalized-in-reply-to>5009AD9521A8D41198EE00805F85F18F219A7E@sembo111.teknor.com&gt;&lt;3D41C544.9090702@unix.sh&gt;&lt;1027735557.15951.3.camel@irongate.swansea.linux.org.uk&gt;&lt;3D4213D4.6020705@unix.sh&gt;&lt;1027773582.17404.2.camel@irongate.swansea.linux.org.uk</normalized-in-reply-to></normalized-references><body type="text/plain; charset=us-ascii; format=flowed"><para depth="0">Alan Cox wrote:
</para><quote depth="1"><quotepara depth="1">On Sat, 2002-07-27 at 04:30, Alan Robertson wrote:

</quotepara><quote depth="2"><quotepara depth="2">Alan Cox wrote:

</quotepara><quote depth="3"><quotepara depth="3">I've been tracking other lists. The current state is very much that we
need the dual notifier. I now have some draft code that allows us to do
this even on hardware that doesn't support it, and where the read()
function gets told when an event is about to occur

</quotepara></quote><quotepara depth="2">I know what had been requested from the telco crowd was the ability to 
register a function to get called (in the kernel) when an event was about to 
occur.

</quotepara></quote><quotepara depth="1">They can already do that anyway. Its called add_timer() 8)
</quotepara></quote><para depth="0">
Given how vaguely I stated it, I guess that's what I deserve ;-)
However, it's not quite what I had in mind. ;-)

</para><para depth="0">You'd like to see the driver add a timer when someone opens the device, and 
removes and readds it each time they tickle the watchdog timer.  It's this 
interaction which the driver has to provide support for.

</para><para depth="0">Also, you'd like to specify how long before the watchdog timer goes off that 
it "pops".

</para><para depth="0">So, you really want something like register_watchdog_pretimeout() and pass 
it a function and a pretimeout time in ticks or milliseconds, or whatever. 
You'd also need an unregister_watchdog_pretimeout() function of course as 
well...  IIRC, this is what I mentioned on the watchdog timer list.

</para><footer type="signature" depth="0" hash="6844291037856230780">	-- Alan Robertson
	   <email>alanr@unix.sh</email>

</footer><footer type="list-management" depth="0">-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to <email>majordomo@vger.kernel.org</email>
More majordomo info at  <url>http://vger.kernel.org/majordomo-info.html</url>
Please read the FAQ at  <url>http://www.tux.org/lkml/</url>

</footer></body></message>