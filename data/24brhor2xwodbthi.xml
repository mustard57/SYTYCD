<message message-id="1303828437273-6305892.post@n2.nabble.com" list="org.jboss.lists.netty-users" id="24brhor2xwodbthi" type="users" date="2011-04-26T06:33:41.646643-08:00" year="2011-01-01" year-month="2011-04-01" year-month-day="2011-04-26" thread-id="xema2xiovcw2sped"><headers><envelope-from-line>Tue Apr 26 06:34:04 2011</envelope-from-line><from personal="chudak" address="meadandale@gmail.com">chudak &lt;meadandale@gmail.com&gt;</from><to personal="netty-users@lists.jboss.org" address="netty-users@lists.jboss.org">netty-users@lists.jboss.org</to><subject normal="ChannelClosedException when adding compression">Re: ChannelClosedException when adding compression</subject><received>from srv-117d-be06.markmail.marklogic.com ([172.19.8.66])
          by mail-1.a.markmail.int (JAMES SMTP Server 2.3.1) with SMTP ID 698
          for &lt;ellen.mcmillan.savage@a.markmail.org&gt;;
          Tue, 26 Apr 2011 06:34:04 -0800 (GMT-08:00)</received><received>from smtp01.dmz-a.mwc.hst.phx2.redhat.com (slb-117n.markmail.marklogic.com [172.19.8.33])
	by mgw-2.public.markmail.int (Postfix) with ESMTP id 43BAE3B3027C
	for &lt;ellen.mcmillan.savage@a.markmail.org&gt;; Tue, 26 Apr 2011 07:33:41 -0700 (PDT)</received><received>from lists01.dmz-a.mwc.hst.phx2.redhat.com (lists01.dmz-a.mwc.hst.phx2.redhat.com [10.5.105.133])
	by smtp01.dmz-a.mwc.hst.phx2.redhat.com (8.13.8/8.13.8) with ESMTP id p3QEY38f018836;
	Tue, 26 Apr 2011 10:34:03 -0400</received><received>from lists01.dmz-a.mwc.hst.phx2.redhat.com (localhost.localdomain [127.0.0.1])
	by lists01.dmz-a.mwc.hst.phx2.redhat.com (8.13.8/8.13.8) with ESMTP id p3QEY37R013832;
	Tue, 26 Apr 2011 10:34:03 -0400</received><received>from sam.nabble.com (sam.nabble.com [216.139.236.26])
	by lists01.dmz-a.mwc.hst.phx2.redhat.com (8.13.8/8.13.8) with ESMTP id
	p3QEXwYL013829
	for &lt;netty-users@lists.jboss.org&gt;; Tue, 26 Apr 2011 10:33:58 -0400</received><received>from jim.nabble.com ([192.168.236.80])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from &lt;meadandale@gmail.com&gt;) id 1QEjKw-0000f7-9p
	for netty-users@lists.jboss.org; Tue, 26 Apr 2011 07:33:58 -0700</received><date>Tue, 26 Apr 2011 07:33:57 -0700 (PDT)</date><message-id>1303828437273-6305892.post@n2.nabble.com</message-id><in-reply-to>&lt;BANLkTikGaNAPp2Y=+NtTJrfPe6+UcTzRkg@mail.gmail.com&gt;</in-reply-to><references>&lt;1303763878332-6303816.post@n2.nabble.com&gt;
	&lt;4DB630C9.1020509@gmail.com&gt;
	&lt;BANLkTikGaNAPp2Y=+NtTJrfPe6+UcTzRkg@mail.gmail.com&gt;</references><mime-version>1.0</mime-version><x-beenthere>netty-users@lists.jboss.org</x-beenthere><x-mailman-version>2.1.9</x-mailman-version><precedence>list</precedence><reply-to>Netty Users &lt;netty-users@lists.jboss.org&gt;</reply-to><list-id>Netty Users &lt;netty-users.lists.jboss.org&gt;</list-id><list-unsubscribe>&lt;https://lists.jboss.org/mailman/listinfo/netty-users&gt;,
	&lt;mailto:netty-users-request@lists.jboss.org?subject=unsubscribe&gt;</list-unsubscribe><list-archive>&lt;http://lists.jboss.org/pipermail/netty-users&gt;</list-archive><list-post>&lt;mailto:netty-users@lists.jboss.org&gt;</list-post><list-help>&lt;mailto:netty-users-request@lists.jboss.org?subject=help&gt;</list-help><list-subscribe>&lt;https://lists.jboss.org/mailman/listinfo/netty-users&gt;,
	&lt;mailto:netty-users-request@lists.jboss.org?subject=subscribe&gt;</list-subscribe><content-type>text/plain; charset="us-ascii"</content-type><content-transfer-encoding>7bit</content-transfer-encoding><sender>netty-users-bounces@lists.jboss.org</sender><errors-to>netty-users-bounces@lists.jboss.org</errors-to></headers><normalized-references><normalized-message-id>1303828437273-6305892.post@n2.nabble.com</normalized-message-id><normalized-in-reply-to>BANLkTikGaNAPp2Y=+NtTJrfPe6+UcTzRkg@mail.gmail.com</normalized-in-reply-to><normalized-reference>1303763878332-6303816.post@n2.nabble.com</normalized-reference><normalized-reference>4DB630C9.1020509@gmail.com</normalized-reference><normalized-reference>BANLkTikGaNAPp2Y=+NtTJrfPe6+UcTzRkg@mail.gmail.com</normalized-reference></normalized-references><body type="text/plain; charset=&quot;us-ascii&quot;"><para depth="0">For what it's worth, I removed the executor handler from my pipeline and the
problem disappeared.

</para><para depth="0">I wonder if I really need this anyways since I've constructed my channel
factory with two cached thread pool executors:

</para><para depth="0">   &lt;bean id="ioThreadPool"
class="org.springframework.beans.factory.config.MethodInvokingFactoryBean"&gt;
     &lt;property name="targetClass" value="java.util.concurrent.Executors"/&gt;
     &lt;property name="targetMethod" value="newCachedThreadPool"/&gt;
   &lt;/bean&gt;

</para><para depth="0">   &lt;bean id="mainThreadPool"
class="org.springframework.beans.factory.config.MethodInvokingFactoryBean"&gt;
     &lt;property name="targetClass" value="java.util.concurrent.Executors"/&gt;
     &lt;property name="targetMethod" value="newCachedThreadPool"/&gt;
   &lt;/bean&gt;

</para><para depth="0">   &lt;bean id="channelFactory"
class="org.jboss.netty.channel.socket.nio.NioServerSocketChannelFactory" 
         destroy-method="releaseExternalResources"&gt;
     &lt;constructor-arg ref="mainThreadPool"/&gt;
     &lt;constructor-arg ref="ioThreadPool"/&gt;
   &lt;/bean&gt;

</para><footer type="list-management" depth="0">--
View this message in context:<br/><url>http://netty-forums-and-mailing-lists.685743.n2.nabble.com/ChannelClosedException-when-adding-compression-tp6303816p6305892.html</url>
Sent from the Netty User Group mailing list archive at Nabble.com.
</footer><footer type="list-management" depth="0">_______________________________________________
netty-users mailing list
<email>netty-users@lists.jboss.org</email>
<url>https://lists.jboss.org/mailman/listinfo/netty-users</url>
</footer></body></message>