<message message-id="20020606044829.YYXA18164.oe-ismta1.bizmailsrvcs.net@SMITH-MICHAEL.openwave.com" list="org.oasis-open.lists.docbook-apps" id="24brud4ecurine4n" type="general" date="2002-06-06T00:48:29-04:00" year="2002-01-01" year-month="2002-06-01" year-month-day="2002-06-05" thread-id="t22vxg7xf2hybkjd"><headers><envelope-from-line>From smith@xml-doc.org Thu,06 Jun 2002 00:48:29 -0400 (EDT)</envelope-from-line><from personal="Michael Smith" address="smith@xml-doc.org">Michael Smith &lt;smith@xml-doc.org&gt;</from><to personal="veillard@redhat.com" address="veillard@redhat.com">veillard@redhat.com</to><subject normal="DOCBOOK-APPS: xsltproc segfaults with 1.51.1">Re: DOCBOOK-APPS: xsltproc segfaults with 1.51.1</subject><x-spam-checker-version>SpamAssassin 3.2.4 (2008-01-01) on
	spam-1.dev.markmail.int</x-spam-checker-version><x-spam-level/><x-spam-status>No, score=-0.4 required=5.0 tests=BAYES_00,HTML_MESSAGE,
	HTML_MIME_NO_HTML_TAG,INVALID_DATE,MIME_HTML_ONLY,NO_RECEIVED,NO_RELAYS
	autolearn=disabled version=3.2.4</x-spam-status><date>Thu,06 Jun 2002 00:48:29 -0400 (EDT)</date><in-reply-to>&lt;3CFDDE3E.2040504@mandrakesoft.com&gt;</in-reply-to><message-id>20020606044829.YYXA18164.oe-ismta1.bizmailsrvcs.net@SMITH-MICHAEL.openwave.com</message-id><mime-version>1.0</mime-version><content-type>text/html; charset=utf8</content-type></headers><normalized-references><normalized-message-id>20020606044829.YYXA18164.oe-ismta1.bizmailsrvcs.net@SMITH-MICHAEL.openwave.com</normalized-message-id><normalized-in-reply-to>3CFDDE3E.2040504@mandrakesoft.com</normalized-in-reply-to></normalized-references><body html2text="elinks" type="text/html; charset=utf8"><para depth="0">Daniel Veillard &lt;<email>veillard@redhat.com</email>&gt; writes:

</para><quote depth="1"><quotepara depth="1">On Wed, Jun 05, 2002 at 06:09:39AM -0500, Michael Smith wrote:
</quotepara><quote depth="2"><quotepara depth="2">Camille BÃ©gnis &lt;<email>camille@mandrakesoft.com</email>&gt; writes:

</quotepara><quote depth="3"><quotepara depth="3">Hmm, tracking down to the code causing the error was easier than I
thought: the following sample works fine with 1.48 and makes xsltproc
1.0.18 segfault with 1.51.1 html (works with FO).
</quotepara></quote><quotepara depth="2">
Yep -- I just tried the same doc instance below on my environment with
xsltproc and the current (cvs) version of the stylesheets
(html/docbook.xsl) and reproduced the same segfault.
</quotepara></quote><quotepara depth="1">
  Hum, I can't reproduce it here:

</quotepara><quotepara depth="1">paphio:~/XSLT/tests/docbook -&gt; /usr/bin/xsltproc  ~/tmp/docbook-xsl-1.51.1/html/docbook.xsl tst.xml
Error Undefined namespace prefix
xmlXPathCompiledEval: evaluation failed
&lt;html&gt;&lt;head&gt;&lt;meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type"&gt;&lt;title&gt;xsltproc segfault test&lt;/title&gt;&lt;meta name="generator" content="DocBook XSL Stylesheets V1.51.1"&gt;&lt;/head&gt;&lt;body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"&gt;&lt;div class="article"&gt;&lt;div class="titlepage"&gt;&lt;div&gt;&lt;h2 class="title"&gt;&lt;a name="id2760937"&gt;&lt;/a&gt;xsltproc segfault test&lt;/h2&gt;&lt;/div&gt;&lt;hr&gt;&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
paphio:~/XSLT/tests/docbook -&gt; /usr/bin/xsltproc --version
Using libxml 20422, libxslt 10018 and libexslt 709
xsltproc was compiled against libxml 20419, libxslt 10018 and libexslt 709
libxslt 10018 was compiled against libxml 20419
libexslt 709 was compiled against libxml 20419
paphio:~/XSLT/tests/docbook -&gt;

</quotepara><quotepara depth="1"> Same for my development version from libxslt/libxml2 CVS, I will dig up about
the Undefined namespace prefix error ... but can you check first with the
RPMs from <url>ftp://xmlsoft.org/</url>
</quotepara></quote><para depth="0">
I compiled from latest release source (libxslt-1.0.18) &amp; I get no
segfault running xsltproc built from that on the same test file (only
error is the 'Undefined namespace prefix' thing).

</para><para depth="0">The xsltproc version I got the segfault from was:

</para><para depth="0">  Using libxml 20417, libxslt 10013 and libexslt 705
  xsltproc was compiled against libxml 20417, libxslt 10013 and libexslt 705
  libxslt 10013 was compiled against libxml 20417
  libexslt 705 was compiled against libxml 20417

</para><para depth="0">But I get no segfault with newer-but-not-the-latest version on another
machine:

</para><para depth="0">  Using libxml 20419, libxslt 10016 and libexslt 707
  xsltproc was compiled against libxml 20419, libxslt 10016 and libexslt 707
  libxslt 10016 was compiled against libxml 20419
  libexslt 707 was compiled against libxml 20419

</para><para depth="0">That's the latest version packaged for Debian. Don't know what the
latest are for other distros are, but it looks like if they're &gt;= 1.0.16
won't get the segfault at least.

</para><para depth="0">  --Mike
</para></body></message>