<message message-id="199707021750.KAA16889@hub.freebsd.org" list="org.freebsd.freebsd-ports" id="24cadmgwpcjpk2ew" type="general" date="1997-07-02T10:50:56-07:00" year="1997-01-01" year-month="1997-07-01" year-month-day="1997-07-02" thread-id="dufzpcwnvwvdhonq"><headers><envelope-from-line>From owner-freebsd-ports  Wed Jul  2 11:00:06 1997</envelope-from-line><from personal="jeffe@ichips.intel.com" address="jeffe@ichips.intel.com">jeffe@ichips.intel.com</from><to personal="freebsd-gnats-submit@FreeBSD.ORG" address="freebsd-gnats-submit@FreeBSD.ORG">freebsd-gnats-submit@FreeBSD.ORG</to><subject normal="ports/4015: package linux_lib-2.4 can run / out of disk space">ports/4015: package linux_lib-2.4 can run / out of disk space</subject><return-path>owner-ports</return-path><received>(from root@localhost)
          by hub.freebsd.org (8.8.5/8.8.5) id LAA17174
          for ports-outgoing; Wed, 2 Jul 1997 11:00:06 -0700 (PDT)</received><received>(from gnats@localhost)
          by hub.freebsd.org (8.8.5/8.8.5) id LAA17159;
          Wed, 2 Jul 1997 11:00:02 -0700 (PDT)</received><resent-date>Wed, 2 Jul 1997 11:00:02 -0700 (PDT)</resent-date><resent-message-id>&lt;199707021800.LAA17159@hub.freebsd.org&gt;</resent-message-id><resent-from>gnats (GNATS Management)</resent-from><resent-to>freebsd-ports</resent-to><resent-reply-to>FreeBSD-gnats@FreeBSD.ORG, jeffe@ichips.intel.com</resent-reply-to><received>(from nobody@localhost)
          by hub.freebsd.org (8.8.5/8.8.5) id KAA16889;
          Wed, 2 Jul 1997 10:50:56 -0700 (PDT)</received><message-id>199707021750.KAA16889@hub.freebsd.org</message-id><date>Wed, 2 Jul 1997 10:50:56 -0700 (PDT)</date><x-send-pr-version>www-1.0</x-send-pr-version><sender>owner-ports@FreeBSD.ORG</sender><x-loop>FreeBSD.org</x-loop><precedence>bulk</precedence></headers><normalized-references><normalized-message-id>199707021750.KAA16889@hub.freebsd.org</normalized-message-id></normalized-references><body type="text/plain"><para depth="0">
</para><quote depth="1"><quotepara depth="1">Number:         4015
Category:       ports
Synopsis:       package linux_lib-2.4 can run / out of disk space
Confidential:   no
Severity:       non-critical
Priority:       low
Responsible:    freebsd-ports
State:          open
Class:          change-request
Submitter-Id:   current-users
Arrival-Date:   Wed Jul  2 11:00:01 PDT 1997
Last-Modified:
Originator:     Jeff Eaton
Organization:
Intel Corporation
Release:        2.2.2-RELEASE
Environment:
</quotepara></quote><para depth="0">FreeBSD pdxnm00.jf.intel.com 2.2.2-RELEASE FreeBSD 2.2.2-RELEASE #1: Fri Jun 27<br/>16:59:55 PDT 1997     <email>root@pdxnm00.jf.intel.com</email>:/usr/src/sys/compile/NETM  i386

</para><quote depth="1"><quotepara depth="1">Description:
</quotepara></quote><para depth="0">I like to have a small / filesystem for various reasons, such as
keeping a replicated version on another disk for emergency use.

</para><para depth="0">I recently tried to install the package linux_lib-2.4.  Much to
my annoyance, it ran / out of disk space.  In poking around, I
found that it was putting a lot of stuff in /compat, a directory
that didn't exist before.

</para><para depth="0">I try to allocate disk space well, using the man page hier(7) for
guidance.  My feeling is that packages and ports should follow
it as well, and especially should not create new directories in /
and then fill them up with lots of stuff.
</para><quote depth="1"><quotepara depth="1">How-To-Repeat:
</quotepara></quote><para depth="0"># df /
Filesystem  1K-blocks     Used    Avail Capacity  Mounted on
/dev/wd0a       31775    16454    12779    56%    /
# ls -l /compat
ls: /compat: No such file or directory
# /stand/sysinstall
[install linux_lib-2.4]
/: write failed, file system is full
[repeated many times]
# df /
Filesystem  1K-blocks     Used    Avail Capacity  Mounted on
/dev/wd0a       31775    31775    -2542   109%    /
# ls -l /compat 
total 1
drwx------  8 root  wheel  512 Jul  2 10:21 linux
# du -s /compat
15337   /compat
# pkg_delete linux_lib-2.4
File `/compat/linux/var/X11R6/lib/nls/local_im_tbl/lt_LN.bit7' doesn't really ex
ist.
File `/compat/linux/var/X11R6/lib/nls/local_im_tbl/lt_LN.bit8' doesn't really ex
ist.
Attempting to delete directory `/compat/linux/usr/X11R6/lib/X11' as a file
This packing list is incorrect - ignoring delete request.

</para><para depth="0">File `/compat/linux/usr/lib/librle.so.1' doesn't really exist.
File `/compat/linux/usr/lib/libppm.so.1' doesn't really exist.
File `/compat/linux/usr/lib/libpnm.so.1' doesn't really exist.
File `/compat/linux/usr/lib/libpgm.so.1' doesn't really exist.
File `/compat/linux/usr/lib/libpbm.so.1' doesn't really exist.
File `/compat/linux/usr/lib/libjpeg.so.6' doesn't really exist.
File `/compat/linux/usr/lib/libz.so.1' doesn't really exist.
File `/compat/linux/usr/lib/libvgagl.so.1' doesn't really exist.
File `/compat/linux/usr/lib/libvga.so.1' doesn't really exist.
File `/compat/linux/usr/lib/libpng.so.1' doesn't really exist.
File `/compat/linux/usr/lib/libstdc++.so.27' doesn't really exist.
File `/compat/linux/usr/lib/libg++.so.27' doesn't really exist.
File `/compat/linux/usr/lib/libf2c.so.0' doesn't really exist.
File `/compat/linux/usr/lib/libform.so.3.0' doesn't really exist.
File `/compat/linux/usr/lib/libmenu.so.3.0' doesn't really exist.
File `/compat/linux/usr/lib/libncurses.so.3.0' doesn't really exist.
File `/compat/linux/usr/lib/libpanel.so.3.0' doesn't really exist.
File `/compat/linux/usr/lib/libtcl.so' doesn't really exist.
File `/compat/linux/usr/lib/libtk.so' doesn't really exist.
File `/compat/linux/usr/lib/libgdbm.so.2' doesn't really exist.
File `/compat/linux/usr/lib/libstdc++.so.26' doesn't really exist.
File `/compat/linux/usr/lib/libg++.so.26' doesn't really exist.
Attempting to delete directory `/compat/linux/usr/X11' as a file
This packing list is incorrect - ignoring delete request.

</para><para depth="0">Attempting to delete directory `/compat/linux/usr/X386' as a file
This packing list is incorrect - ignoring delete request.

</para><para depth="0">Unable to completely remove directory '/compat/linux/var/X11R6/lib/locale/tbl_da
ta'
Unable to completely remove directory '/compat/linux/var/X11R6/lib/locale'
Attempting to delete file `/compat/linux/var/X11R6/lib/nls/local_im_tbl' as a di
rectory
This packing list is incorrect - ignoring delete request.

</para><para depth="0">Unable to completely remove directory '/compat/linux/var/X11R6/lib/nls'
Unable to completely remove directory '/compat/linux/var/X11R6/lib'
Unable to completely remove directory '/compat/linux/var/X11R6'
Unable to completely remove directory '/compat/linux/var'
Couldn't entirely delete package (perhaps the packing list is
incorrectly specified?)
# du -s /compat
27      /compat

</para><quote depth="1"><quotepara depth="1">Fix:
</quotepara></quote><para depth="0">put it in /usr/local/lib/linux, or even /usr/local/compat; anywhere
but /
</para><quote depth="1"><quotepara depth="1">Audit-Trail:
Unformatted:
</quotepara></quote><footer type="noise" depth="0">
</footer></body></message>